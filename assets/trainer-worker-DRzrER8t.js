var s0=Object.defineProperty;var f0=(et,tt,xt)=>tt in et?s0(et,tt,{enumerable:!0,configurable:!0,writable:!0,value:xt}):et[tt]=xt;var H=(et,tt,xt)=>f0(et,typeof tt!="symbol"?tt+"":tt,xt);(function(){"use strict";function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},et.apply(null,arguments)}var tt={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function xt(e,t){if(Kt(e,t))return e[t];throw typeof e[t]=="function"&&lu(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function cu(e,t,r){if(Kt(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Kt(e,t){return!hu(e)&&!Array.isArray(e)?!1:Ut(du,t)?!0:!(t in Object.prototype||t in Function.prototype)}function lu(e,t){return e==null||typeof e[t]!="function"||Ut(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Ut(Du,t)?!0:!(t in Object.prototype||t in Function.prototype)}function hu(e){return typeof e=="object"&&e&&e.constructor===Object}var du={length:!0,name:!0},Du={toString:!0,valueOf:!0,toLocaleString:!0};class pu{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return xt(this.wrappedObject,t)}set(t,r){return cu(this.wrappedObject,t,r),this}has(t){return Kt(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return vu(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var r of this.keys())t(this.get(r),r,this)}delete(t){Kt(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function vu(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function De(e){return typeof e=="number"}function ye(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function gu(e){return typeof e=="bigint"}function pn(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function vn(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function gn(e){return e&&e.constructor.prototype.isUnit===!0||!1}function rt(e){return typeof e=="string"}var Se=Array.isArray;function we(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Qt(e){return Array.isArray(e)||we(e)}function mu(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function wu(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function yu(e){return e&&e.constructor.prototype.isRange===!0||!1}function Mr(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Au(e){return typeof e=="boolean"}function Fu(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Eu(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Cu(e){return typeof e=="function"}function _u(e){return e instanceof Date}function Bu(e){return e instanceof RegExp}function Nr(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!pn(e)&&!vn(e))}function xu(e){return e?e instanceof Map||e instanceof pu||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function bu(e){return e===null}function Su(e){return e===void 0}function Mu(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Nu(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Tu(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ou(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function zu(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Iu(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ru(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function $u(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Pu(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function qu(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Uu(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Lu(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Gu(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Zu(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ju(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Vu(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xu(e){return e&&e.constructor.prototype.isChain===!0||!1}function lt(e){var t=typeof e;return t==="object"?e===null?"null":ye(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function ve(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return ve(r)});if(e instanceof Date)return new Date(e.valueOf());if(ye(e))return e;if(Nr(e))return ku(e,ve);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function ku(e,t){var r={};for(var n in e)Ut(e,n)&&(r[n]=t(e[n]));return r}function mn(e,t){for(var r in t)Ut(t,r)&&(e[r]=t[r]);return e}function ht(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!ht(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!ht(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Ut(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Hu(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],u=e[i];u!==void 0&&(r[i]=u)}return r}var Wu=["Matrix","Array"],Yu=["number","BigNumber","Fraction"],wt=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(tt)};et(wt,tt,{MATRIX_OPTIONS:Wu,NUMBER_OPTIONS:Yu});function wn(){return!0}function Ve(){return!1}function bt(){}const yn="Argument is not a typed-function.";function An(){function e(A){return typeof A=="object"&&A!==null&&A.constructor===Object}const t=[{name:"number",test:function(A){return typeof A=="number"}},{name:"string",test:function(A){return typeof A=="string"}},{name:"boolean",test:function(A){return typeof A=="boolean"}},{name:"Function",test:function(A){return typeof A=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(A){return A instanceof Date}},{name:"RegExp",test:function(A){return A instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(A){return A===null}},{name:"undefined",test:function(A){return A===void 0}}],r={name:"any",test:wn,isAny:!0};let n,i,u=0,a={createCount:0};function s(A){const x=n.get(A);if(x)return x;let S='Unknown type "'+A+'"';const z=A.toLowerCase();let P;for(P of i)if(P.toLowerCase()===z){S+='. Did you mean "'+P+'" ?';break}throw new TypeError(S)}function o(A){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const S=x?s(x).index:i.length,z=[];for(let $=0;$<A.length;++$){if(!A[$]||typeof A[$].name!="string"||typeof A[$].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const J=A[$].name;if(n.has(J))throw new TypeError('Duplicate type name "'+J+'"');z.push(J),n.set(J,{name:J,test:A[$].test,isAny:A[$].isAny,index:S+$,conversionsTo:[]})}const P=i.slice(S);i=i.slice(0,S).concat(z).concat(P);for(let $=S+z.length;$<i.length;++$)n.get(i[$]).index=$}function c(){n=new Map,i=[],u=0,o([r],!1)}c(),o(t);function f(){let A;for(A of i)n.get(A).conversionsTo=[];u=0}function l(A){const x=i.filter(S=>{const z=n.get(S);return!z.isAny&&z.test(A)});return x.length?x:["any"]}function d(A){return A&&typeof A=="function"&&"_typedFunctionData"in A}function D(A,x,S){if(!d(A))throw new TypeError(yn);const z=S&&S.exact,P=Array.isArray(x)?x.join(","):x,$=y(P),J=m($);if(!z||J in A.signatures){const ce=A._typedFunctionData.signatureMap.get(J);if(ce)return ce}const G=$.length;let V;if(z){V=[];let ce;for(ce in A.signatures)V.push(A._typedFunctionData.signatureMap.get(ce))}else V=A._typedFunctionData.signatures;for(let ce=0;ce<G;++ce){const pe=$[ce],be=[];let Ze;for(Ze of V){const Ue=E(Ze.params,ce);if(!(!Ue||pe.restParam&&!Ue.restParam)){if(!Ue.hasAny){const Qe=w(Ue);if(pe.types.some(je=>!Qe.has(je.name)))continue}be.push(Ze)}}if(V=be,V.length===0)break}let L;for(L of V)if(L.params.length<=G)return L;throw new TypeError("Signature not found (signature: "+(A.name||"unnamed")+"("+m($,", ")+"))")}function p(A,x,S){return D(A,x,S).implementation}function h(A,x){const S=s(x);if(S.test(A))return A;const z=S.conversionsTo;if(z.length===0)throw new Error("There are no conversions to "+x+" defined.");for(let P=0;P<z.length;P++)if(s(z[P].from).test(A))return z[P].convert(A);throw new Error("Cannot convert "+A+" to "+x)}function m(A){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return A.map(S=>S.name).join(x)}function F(A){const x=A.indexOf("...")===0,z=(x?A.length>3?A.slice(3):"any":A).split("|").map(G=>s(G.trim()));let P=!1,$=x?"...":"";return{types:z.map(function(G){return P=G.isAny||P,$+=G.name+"|",{name:G.name,typeIndex:G.index,test:G.test,isAny:G.isAny,conversion:null,conversionIndex:-1}}),name:$.slice(0,-1),hasAny:P,hasConversion:!1,restParam:x}}function _(A){const x=A.types.map(J=>J.name),S=W(x);let z=A.hasAny,P=A.name;const $=S.map(function(J){const G=s(J.from);return z=G.isAny||z,P+="|"+J.from,{name:J.from,typeIndex:G.index,test:G.test,isAny:G.isAny,conversion:J,conversionIndex:J.index}});return{types:A.types.concat($),name:P,hasAny:z,hasConversion:$.length>0,restParam:A.restParam}}function w(A){return A.typeSet||(A.typeSet=new Set,A.types.forEach(x=>A.typeSet.add(x.name))),A.typeSet}function y(A){const x=[];if(typeof A!="string")throw new TypeError("Signatures must be strings");const S=A.trim();if(S==="")return x;const z=S.split(",");for(let P=0;P<z.length;++P){const $=F(z[P].trim());if($.restParam&&P!==z.length-1)throw new SyntaxError('Unexpected rest parameter "'+z[P]+'": only allowed for the last parameter');if($.types.length===0)return null;x.push($)}return x}function v(A){const x=he(A);return x?x.restParam:!1}function g(A){if(!A||A.types.length===0)return wn;if(A.types.length===1)return s(A.types[0].name).test;if(A.types.length===2){const x=s(A.types[0].name).test,S=s(A.types[1].name).test;return function(P){return x(P)||S(P)}}else{const x=A.types.map(function(S){return s(S.name).test});return function(z){for(let P=0;P<x.length;P++)if(x[P](z))return!0;return!1}}}function C(A){let x,S,z;if(v(A)){x=qe(A).map(g);const P=x.length,$=g(he(A)),J=function(G){for(let V=P;V<G.length;V++)if(!$(G[V]))return!1;return!0};return function(V){for(let L=0;L<x.length;L++)if(!x[L](V[L]))return!1;return J(V)&&V.length>=P+1}}else return A.length===0?function($){return $.length===0}:A.length===1?(S=g(A[0]),function($){return S($[0])&&$.length===1}):A.length===2?(S=g(A[0]),z=g(A[1]),function($){return S($[0])&&z($[1])&&$.length===2}):(x=A.map(g),function($){for(let J=0;J<x.length;J++)if(!x[J]($[J]))return!1;return $.length===x.length})}function E(A,x){return x<A.length?A[x]:v(A)?he(A):null}function B(A,x){const S=E(A,x);return S?w(S):new Set}function b(A){return A.conversion===null||A.conversion===void 0}function M(A,x){const S=new Set;return A.forEach(z=>{const P=B(z.params,x);let $;for($ of P)S.add($)}),S.has("any")?["any"]:Array.from(S)}function I(A,x,S){let z,P;const $=A||"unnamed";let J=S,G;for(G=0;G<x.length;G++){const pe=[];if(J.forEach(be=>{const Ze=E(be.params,G),Ue=g(Ze);(G<be.params.length||v(be.params))&&Ue(x[G])&&pe.push(be)}),pe.length===0){if(P=M(J,G),P.length>0){const be=l(x[G]);return z=new TypeError("Unexpected type of argument in function "+$+" (expected: "+P.join(" or ")+", actual: "+be.join(" | ")+", index: "+G+")"),z.data={category:"wrongType",fn:$,index:G,actual:be,expected:P},z}}else J=pe}const V=J.map(function(pe){return v(pe.params)?1/0:pe.params.length});if(x.length<Math.min.apply(null,V))return P=M(J,G),z=new TypeError("Too few arguments in function "+$+" (expected: "+P.join(" or ")+", index: "+x.length+")"),z.data={category:"tooFewArgs",fn:$,index:x.length,expected:P},z;const L=Math.max.apply(null,V);if(x.length>L)return z=new TypeError("Too many arguments in function "+$+" (expected: "+L+", actual: "+x.length+")"),z.data={category:"tooManyArgs",fn:$,index:x.length,expectedLength:L},z;const ce=[];for(let pe=0;pe<x.length;++pe)ce.push(l(x[pe]).join("|"));return z=new TypeError('Arguments of type "'+ce.join(", ")+'" do not match any of the defined signatures of function '+$+"."),z.data={category:"mismatch",actual:ce},z}function U(A){let x=i.length+1;for(let S=0;S<A.types.length;S++)b(A.types[S])&&(x=Math.min(x,A.types[S].typeIndex));return x}function O(A){let x=u+1;for(let S=0;S<A.types.length;S++)b(A.types[S])||(x=Math.min(x,A.types[S].conversionIndex));return x}function q(A,x){if(A.hasAny){if(!x.hasAny)return 1}else if(x.hasAny)return-1;if(A.restParam){if(!x.restParam)return 1}else if(x.restParam)return-1;if(A.hasConversion){if(!x.hasConversion)return 1}else if(x.hasConversion)return-1;const S=U(A)-U(x);if(S<0)return-1;if(S>0)return 1;const z=O(A)-O(x);return z<0?-1:z>0?1:0}function N(A,x){const S=A.params,z=x.params,P=he(S),$=he(z),J=v(S),G=v(z);if(J&&P.hasAny){if(!G||!$.hasAny)return 1}else if(G&&$.hasAny)return-1;let V=0,L=0,ce;for(ce of S)ce.hasAny&&++V,ce.hasConversion&&++L;let pe=0,be=0;for(ce of z)ce.hasAny&&++pe,ce.hasConversion&&++be;if(V!==pe)return V-pe;if(J&&P.hasConversion){if(!G||!$.hasConversion)return 1}else if(G&&$.hasConversion)return-1;if(L!==be)return L-be;if(J){if(!G)return 1}else if(G)return-1;const Ze=(S.length-z.length)*(J?-1:1);if(Ze!==0)return Ze;const Ue=[];let Qe=0;for(let qt=0;qt<S.length;++qt){const br=q(S[qt],z[qt]);Ue.push(br),Qe+=br}if(Qe!==0)return Qe;let je;for(je of Ue)if(je!==0)return je;return 0}function W(A){if(A.length===0)return[];const x=A.map(s);A.length>1&&x.sort((P,$)=>P.index-$.index);let S=x[0].conversionsTo;if(A.length===1)return S;S=S.concat([]);const z=new Set(A);for(let P=1;P<x.length;++P){let $;for($ of x[P].conversionsTo)z.has($.from)||(S.push($),z.add($.from))}return S}function X(A,x){let S=x;if(A.some(P=>P.hasConversion)){const P=v(A),$=A.map(k);S=function(){const G=[],V=P?arguments.length-1:arguments.length;for(let L=0;L<V;L++)G[L]=$[L](arguments[L]);return P&&(G[V]=arguments[V].map($[V])),x.apply(this,G)}}let z=S;if(v(A)){const P=A.length-1;z=function(){return S.apply(this,fe(arguments,0,P).concat([fe(arguments,P)]))}}return z}function k(A){let x,S,z,P;const $=[],J=[];switch(A.types.forEach(function(G){G.conversion&&($.push(s(G.conversion.from).test),J.push(G.conversion.convert))}),J.length){case 0:return function(V){return V};case 1:return x=$[0],z=J[0],function(V){return x(V)?z(V):V};case 2:return x=$[0],S=$[1],z=J[0],P=J[1],function(V){return x(V)?z(V):S(V)?P(V):V};default:return function(V){for(let L=0;L<J.length;L++)if($[L](V))return J[L](V);return V}}}function ee(A){function x(S,z,P){if(z<S.length){const $=S[z];let J=[];if($.restParam){const G=$.types.filter(b);G.length<$.types.length&&J.push({types:G,name:"..."+G.map(V=>V.name).join("|"),hasAny:G.some(V=>V.isAny),hasConversion:!1,restParam:!0}),J.push($)}else J=$.types.map(function(G){return{types:[G],name:G.name,hasAny:G.isAny,hasConversion:G.conversion,restParam:!1}});return Ie(J,function(G){return x(S,z+1,P.concat([G]))})}else return[P]}return x(A,0,[])}function ae(A,x){const S=Math.max(A.length,x.length);for(let G=0;G<S;G++){const V=B(A,G),L=B(x,G);let ce=!1,pe;for(pe of L)if(V.has(pe)){ce=!0;break}if(!ce)return!1}const z=A.length,P=x.length,$=v(A),J=v(x);return $?J?z===P:P>=z:J?z>=P:z===P}function ue(A){return A.map(x=>ct(x)?We(x.referToSelf.callback):ft(x)?Oe(x.referTo.references,x.referTo.callback):x)}function oe(A,x,S){const z=[];let P;for(P of A){let $=S[P];if(typeof $!="number")throw new TypeError('No definition for referenced signature "'+P+'"');if($=x[$],typeof $!="function")return!1;z.push($)}return z}function xe(A,x,S){const z=ue(A),P=new Array(z.length).fill(!1);let $=!0;for(;$;){$=!1;let J=!0;for(let G=0;G<z.length;++G){if(P[G])continue;const V=z[G];if(ct(V))z[G]=V.referToSelf.callback(S),z[G].referToSelf=V.referToSelf,P[G]=!0,J=!1;else if(ft(V)){const L=oe(V.referTo.references,z,x);L?(z[G]=V.referTo.callback.apply(this,L),z[G].referTo=V.referTo,P[G]=!0,J=!1):$=!0}}if(J&&$)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return z}function _e(A){const x=/\bthis(\(|\.signatures\b)/;Object.keys(A).forEach(S=>{const z=A[S];if(x.test(z.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ee(A,x){if(a.createCount++,Object.keys(x).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&_e(x);const S=[],z=[],P={},$=[];let J;for(J in x){if(!Object.prototype.hasOwnProperty.call(x,J))continue;const se=y(J);if(!se)continue;S.forEach(function(Yt){if(ae(Yt,se))throw new TypeError('Conflicting signatures "'+m(Yt)+'" and "'+m(se)+'".')}),S.push(se);const Je=z.length;z.push(x[J]);const a0=se.map(_);let Sr;for(Sr of ee(a0)){const Yt=m(Sr);$.push({params:Sr,name:Yt,fn:Je}),Sr.every(o0=>!o0.hasConversion)&&(P[Yt]=Je)}}$.sort(N);const G=xe(z,P,Wt);let V;for(V in P)Object.prototype.hasOwnProperty.call(P,V)&&(P[V]=G[P[V]]);const L=[],ce=new Map;for(V of $)ce.has(V.name)||(V.fn=G[V.fn],L.push(V),ce.set(V.name,V));const pe=L[0]&&L[0].params.length<=2&&!v(L[0].params),be=L[1]&&L[1].params.length<=2&&!v(L[1].params),Ze=L[2]&&L[2].params.length<=2&&!v(L[2].params),Ue=L[3]&&L[3].params.length<=2&&!v(L[3].params),Qe=L[4]&&L[4].params.length<=2&&!v(L[4].params),je=L[5]&&L[5].params.length<=2&&!v(L[5].params),qt=pe&&be&&Ze&&Ue&&Qe&&je;for(let se=0;se<L.length;++se)L[se].test=C(L[se].params);const br=pe?g(L[0].params[0]):Ve,Tc=be?g(L[1].params[0]):Ve,Oc=Ze?g(L[2].params[0]):Ve,zc=Ue?g(L[3].params[0]):Ve,Ic=Qe?g(L[4].params[0]):Ve,Rc=je?g(L[5].params[0]):Ve,$c=pe?g(L[0].params[1]):Ve,Pc=be?g(L[1].params[1]):Ve,qc=Ze?g(L[2].params[1]):Ve,Uc=Ue?g(L[3].params[1]):Ve,Lc=Qe?g(L[4].params[1]):Ve,Gc=je?g(L[5].params[1]):Ve;for(let se=0;se<L.length;++se)L[se].implementation=X(L[se].params,L[se].fn);const Zc=pe?L[0].implementation:bt,Jc=be?L[1].implementation:bt,Vc=Ze?L[2].implementation:bt,Xc=Ue?L[3].implementation:bt,kc=Qe?L[4].implementation:bt,Hc=je?L[5].implementation:bt,Wc=pe?L[0].params.length:-1,Yc=be?L[1].params.length:-1,Kc=Ze?L[2].params.length:-1,Qc=Ue?L[3].params.length:-1,jc=Qe?L[4].params.length:-1,e0=je?L[5].params.length:-1,t0=qt?6:0,r0=L.length,n0=L.map(se=>se.test),i0=L.map(se=>se.implementation),u0=function(){for(let Je=t0;Je<r0;Je++)if(n0[Je](arguments))return i0[Je].apply(this,arguments);return a.onMismatch(A,arguments,L)};function Wt(se,Je){return arguments.length===Wc&&br(se)&&$c(Je)?Zc.apply(this,arguments):arguments.length===Yc&&Tc(se)&&Pc(Je)?Jc.apply(this,arguments):arguments.length===Kc&&Oc(se)&&qc(Je)?Vc.apply(this,arguments):arguments.length===Qc&&zc(se)&&Uc(Je)?Xc.apply(this,arguments):arguments.length===jc&&Ic(se)&&Lc(Je)?kc.apply(this,arguments):arguments.length===e0&&Rc(se)&&Gc(Je)?Hc.apply(this,arguments):u0.apply(this,arguments)}try{Object.defineProperty(Wt,"name",{value:A})}catch{}return Wt.signatures=P,Wt._typedFunctionData={signatures:L,signatureMap:ce},Wt}function ge(A,x,S){throw I(A,x,S)}function qe(A){return fe(A,0,A.length-1)}function he(A){return A[A.length-1]}function fe(A,x,S){return Array.prototype.slice.call(A,x,S)}function He(A,x){for(let S=0;S<A.length;S++)if(x(A[S]))return A[S]}function Ie(A,x){return Array.prototype.concat.apply([],A.map(x))}function de(){const A=qe(arguments).map(S=>m(y(S))),x=he(arguments);if(typeof x!="function")throw new TypeError("Callback function expected as last argument");return Oe(A,x)}function Oe(A,x){return{referTo:{references:A,callback:x}}}function We(A){if(typeof A!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:A}}}function ft(A){return A&&typeof A.referTo=="object"&&Array.isArray(A.referTo.references)&&typeof A.referTo.callback=="function"}function ct(A){return A&&typeof A.referToSelf=="object"&&typeof A.referToSelf.callback=="function"}function $t(A,x){if(!A)return x;if(x&&x!==A){const S=new Error("Function names do not match (expected: "+A+", actual: "+x+")");throw S.data={actual:x,expected:A},S}return A}function Pt(A){let x;for(const S in A)Object.prototype.hasOwnProperty.call(A,S)&&(d(A[S])||typeof A[S].signature=="string")&&(x=$t(x,A[S].name));return x}function Dn(A,x){let S;for(S in x)if(Object.prototype.hasOwnProperty.call(x,S)){if(S in A&&x[S]!==A[S]){const z=new Error('Signature "'+S+'" is defined twice');throw z.data={signature:S,sourceFunction:x[S],destFunction:A[S]},z}A[S]=x[S]}}const Nc=a;a=function(A){const x=typeof A=="string",S=x?1:0;let z=x?A:"";const P={};for(let $=S;$<arguments.length;++$){const J=arguments[$];let G={},V;if(typeof J=="function"?(V=J.name,typeof J.signature=="string"?G[J.signature]=J:d(J)&&(G=J.signatures)):e(J)&&(G=J,x||(V=Pt(J))),Object.keys(G).length===0){const L=new TypeError("Argument to 'typed' at index "+$+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw L.data={index:$,argument:J},L}x||(z=$t(z,V)),Dn(P,G)}return Ee(z||"",P)},a.create=An,a.createCount=Nc.createCount,a.onMismatch=ge,a.throwMismatchError=ge,a.createError=I,a.clear=c,a.clearConversions=f,a.addTypes=o,a._findType=s,a.referTo=de,a.referToSelf=We,a.convert=h,a.findSignature=D,a.find=p,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(A,x){let S="any";x!==!1&&n.has("Object")&&(S="Object"),a.addTypes([A],S)};function fu(A){if(!A||typeof A.from!="string"||typeof A.to!="string"||typeof A.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(A.to===A.from)throw new SyntaxError('Illegal to define conversion from "'+A.from+'" to itself.')}return a.addConversion=function(A){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};fu(A);const S=s(A.to),z=S.conversionsTo.find(P=>P.from===A.from);if(z)if(x&&x.override)a.removeConversion({from:z.from,to:A.to,convert:z.convert});else throw new Error('There is already a conversion from "'+A.from+'" to "'+S.name+'"');S.conversionsTo.push({from:A.from,convert:A.convert,index:u++})},a.addConversions=function(A,x){A.forEach(S=>a.addConversion(S,x))},a.removeConversion=function(A){fu(A);const x=s(A.to),S=He(x.conversionsTo,P=>P.from===A.from);if(!S)throw new Error("Attempt to remove nonexistent conversion from "+A.from+" to "+A.to);if(S.convert!==A.convert)throw new Error("Conversion to remove does not match existing conversion");const z=x.conversionsTo.indexOf(S);x.conversionsTo.splice(z,1)},a.resolve=function(A,x){if(!d(A))throw new TypeError(yn);const S=A._typedFunctionData.signatures;for(let z=0;z<S.length;++z)if(S[z].test(x))return S[z];return null},a}var jt=An();function Q(e,t,r,n){function i(u){var a=Hu(u,t.map(ju));return Ku(e,t,u),r(a)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&&(i.meta=n),i}function Ku(e,t,r){var n=t.filter(u=>!Qu(u)).every(u=>r[u]!==void 0);if(!n){var i=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Qu(e){return e&&e[0]==="?"}function ju(e){return e&&e[0]==="?"?e.slice(1):e}function Ce(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Tr(e,t,r){var n={2:"0b",8:"0o",16:"0x"},i=n[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ce(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ce(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(i).concat(e.toString(t)).concat(u)}function Or(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:n,wordSize:i}=Fn(t);switch(r){case"fixed":return ta(e,n);case"exponential":return En(e,n);case"engineering":return ea(e,n);case"bin":return Tr(e,2,i);case"oct":return Tr(e,8,i);case"hex":return Tr(e,16,i);case"auto":return ra(e,n,t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],a=arguments[4];return u!=="."?u+a:a});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Fn(e){var t="auto",r,n;if(e!==void 0)if(De(e))r=e;else if(ye(e))r=e.toNumber();else if(Nr(e))e.precision!==void 0&&(r=Cn(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(n=Cn(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:r,wordSize:n}}function er(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),u=n.indexOf(".");i+=u!==-1?u-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return a.length===0&&(a.push(0),i++),{sign:r,coefficients:a,exponent:i}}function ea(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=er(e),n=tr(r,t),i=n.exponent,u=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(De(t))for(;t>u.length||i-a+1>u.length;)u.push(0);else for(var s=Math.abs(i-a)-(u.length-1),o=0;o<s;o++)u.push(0);for(var c=Math.abs(i-a),f=1;c>0;)f++,c--;var l=u.slice(f).join(""),d=De(t)&&l.length||l.match(/[1-9]/)?"."+l:"",D=u.slice(0,f).join("")+d+"e"+(i>=0?"+":"")+a.toString();return n.sign+D}function ta(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=er(e),n=typeof t=="number"?tr(r,r.exponent+1+t):r,i=n.coefficients,u=n.exponent+1,a=u+(t||0);return i.length<a&&(i=i.concat(St(a-i.length))),u<0&&(i=St(-u+1).concat(i),u=1),u<i.length&&i.splice(u,0,u===0?"0.":"."),n.sign+i.join("")}function En(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=er(e),n=t?tr(r,t):r,i=n.coefficients,u=n.exponent;i.length<t&&(i=i.concat(St(t-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function ra(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=_n(r==null?void 0:r.lowerExp,-3),i=_n(r==null?void 0:r.upperExp,5),u=er(e),a=t?tr(u,t):u;if(a.exponent<n||a.exponent>=i)return En(e,t);var s=a.coefficients,o=a.exponent;s.length<t&&(s=s.concat(St(t-s.length))),s=s.concat(St(o-s.length+1+(s.length<t?t-s.length:0))),s=St(-o).concat(s);var c=o>0?o:0;return c<s.length-1&&s.splice(c+1,0,"."),a.sign+s.join("")}function tr(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var i=n.splice(t,n.length-t);if(i[0]>=5){var u=t-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function St(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function na(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function rr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(r*Math.max(Math.abs(e),Math.abs(t)),n)}function Cn(e,t){if(De(e))return e;if(ye(e))return e.toNumber();t()}function _n(e,t){return De(e)?e:ye(e)?e.toNumber():t}var Bn=function(){return Bn=jt.create,jt},ia=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ua=Q("typed",ia,function(t){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:u}=t,a=Bn();return a.clear(),a.addTypes([{name:"number",test:De},{name:"Complex",test:pn},{name:"BigNumber",test:ye},{name:"bigint",test:gu},{name:"Fraction",test:vn},{name:"Unit",test:gn},{name:"identifier",test:s=>rt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:rt},{name:"Chain",test:Xu},{name:"Array",test:Se},{name:"Matrix",test:we},{name:"DenseMatrix",test:mu},{name:"SparseMatrix",test:wu},{name:"Range",test:yu},{name:"Index",test:Mr},{name:"boolean",test:Au},{name:"ResultSet",test:Fu},{name:"Help",test:Eu},{name:"function",test:Cu},{name:"Date",test:_u},{name:"RegExp",test:Bu},{name:"null",test:bu},{name:"undefined",test:Su},{name:"AccessorNode",test:Mu},{name:"ArrayNode",test:Nu},{name:"AssignmentNode",test:Tu},{name:"BlockNode",test:Ou},{name:"ConditionalNode",test:zu},{name:"ConstantNode",test:Iu},{name:"FunctionNode",test:$u},{name:"FunctionAssignmentNode",test:Ru},{name:"IndexNode",test:Pu},{name:"Node",test:qu},{name:"ObjectNode",test:Uu},{name:"OperatorNode",test:Lu},{name:"ParenthesisNode",test:Gu},{name:"RangeNode",test:Zu},{name:"RelationalNode",test:Ju},{name:"SymbolNode",test:Vu},{name:"Map",test:xu},{name:"Object",test:Nr}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(o){if(r||nr(o),na(o)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+o+"). Use function bignumber(x) to convert to BigNumber.");return new r(o)}},{from:"number",to:"Complex",convert:function(o){return n||ir(o),new n(o,0)}},{from:"BigNumber",to:"Complex",convert:function(o){return n||ir(o),new n(o.toNumber(),0)}},{from:"bigint",to:"number",convert:function(o){if(o>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+o+")");return Number(o)}},{from:"bigint",to:"BigNumber",convert:function(o){return r||nr(o),new r(o.toString())}},{from:"bigint",to:"Fraction",convert:function(o){return u||ur(o),new u(o)}},{from:"Fraction",to:"BigNumber",convert:function(o){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(o){return n||ir(o),new n(o.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(o){u||ur(o);var c=new u(o);if(c.valueOf()!==o)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+o+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(o){var c=Number(o);if(isNaN(c))throw new Error('Cannot convert "'+o+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(o){r||nr(o);try{return new r(o)}catch{throw new Error('Cannot convert "'+o+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(o){try{return BigInt(o)}catch{throw new Error('Cannot convert "'+o+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(o){u||ur(o);try{return new u(o)}catch{throw new Error('Cannot convert "'+o+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(o){n||ir(o);try{return new n(o)}catch{throw new Error('Cannot convert "'+o+'" to Complex')}}},{from:"boolean",to:"number",convert:function(o){return+o}},{from:"boolean",to:"BigNumber",convert:function(o){return r||nr(o),new r(+o)}},{from:"boolean",to:"bigint",convert:function(o){return BigInt(+o)}},{from:"boolean",to:"Fraction",convert:function(o){return u||ur(o),new u(+o)}},{from:"boolean",to:"string",convert:function(o){return String(o)}},{from:"Array",to:"Matrix",convert:function(o){return i||aa(),new i(o)}},{from:"Matrix",to:"Array",convert:function(o){return o.valueOf()}}]),a.onMismatch=(s,o,c)=>{var f=a.createError(s,o,c);if(["wrongType","mismatch"].includes(f.data.category)&&o.length===1&&Qt(o[0])&&c.some(d=>!d.params.includes(","))){var l=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw l.data=f.data,l}throw f},a.onMismatch=(s,o,c)=>{var f=a.createError(s,o,c);if(["wrongType","mismatch"].includes(f.data.category)&&o.length===1&&Qt(o[0])&&c.some(d=>!d.params.includes(","))){var l=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw l.data=f.data,l}throw f},a});function nr(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function ir(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function aa(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ur(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Mt=9e15,dt=1e9,zr="0123456789abcdef",ar="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",or="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ir={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Mt,maxE:Mt,crypto:!1},xn,at,te=!0,sr="[DecimalError] ",Dt=sr+"Invalid argument: ",bn=sr+"Precision limit exceeded",Sn=sr+"crypto unavailable",Mn="[object Decimal]",Re=Math.floor,Me=Math.pow,oa=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,sa=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,fa=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Nn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ye=1e7,j=7,ca=9007199254740991,la=ar.length-1,Rr=or.length-1,R={toStringTag:Mn};R.absoluteValue=R.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Y(e)},R.ceil=function(){return Y(new this.constructor(this),this.e+1,2)},R.clampedTo=R.clamp=function(e,t){var r,n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Dt+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new i(n)},R.comparedTo=R.cmp=function(e){var t,r,n,i,u=this,a=u.d,s=(e=new u.constructor(e)).d,o=u.s,c=e.s;if(!a||!s)return!o||!c?NaN:o!==c?o:a===s?0:!a^o<0?1:-1;if(!a[0]||!s[0])return a[0]?o:s[0]?-c:0;if(o!==c)return o;if(u.e!==e.e)return u.e>e.e^o<0?1:-1;for(n=a.length,i=s.length,t=0,r=n<i?n:i;t<r;++t)if(a[t]!==s[t])return a[t]>s[t]^o<0?1:-1;return n===i?0:n>i^o<0?1:-1},R.cosine=R.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+j,n.rounding=1,r=ha(n,$n(n,r)),n.precision=e,n.rounding=t,Y(at==2||at==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)},R.cubeRoot=R.cbrt=function(){var e,t,r,n,i,u,a,s,o,c,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(te=!1,u=f.s*Me(f.s*f,1/3),!u||Math.abs(u)==1/0?(r=ze(f.d),e=f.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=Me(r,1/3),e=Re((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new l(r),n.s=f.s):n=new l(u.toString()),a=(e=l.precision)+3;;)if(s=n,o=s.times(s).times(s),c=o.plus(f),n=le(c.plus(f).times(s),c.plus(o),a+2,1),ze(s.d).slice(0,a)===(r=ze(n.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!i&&r=="4999"){if(!i&&(Y(s,e+1,0),s.times(s).times(s).eq(f))){n=s;break}a+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Y(n,e+1,1),t=!n.times(n).times(n).eq(f));break}return te=!0,Y(n,e,l.rounding,t)},R.decimalPlaces=R.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Re(this.e/j))*j,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},R.dividedBy=R.div=function(e){return le(this,new this.constructor(e))},R.dividedToIntegerBy=R.divToInt=function(e){var t=this,r=t.constructor;return Y(le(t,new r(e),0,1,1),r.precision,r.rounding)},R.equals=R.eq=function(e){return this.cmp(e)===0},R.floor=function(){return Y(new this.constructor(this),this.e+1,3)},R.greaterThan=R.gt=function(e){return this.cmp(e)>0},R.greaterThanOrEqualTo=R.gte=function(e){var t=this.cmp(e);return t==1||t===0},R.hyperbolicCosine=R.cosh=function(){var e,t,r,n,i,u=this,a=u.constructor,s=new a(1);if(!u.isFinite())return new a(u.s?1/0:NaN);if(u.isZero())return s;r=a.precision,n=a.rounding,a.precision=r+Math.max(u.e,u.sd())+4,a.rounding=1,i=u.d.length,i<32?(e=Math.ceil(i/3),t=(1/dr(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=Nt(a,1,u.times(t),new a(1),!0);for(var o,c=e,f=new a(8);c--;)o=u.times(u),u=s.minus(o.times(f.minus(o.times(f))));return Y(u,a.precision=r,a.rounding=n,!0)},R.hyperbolicSine=R.sinh=function(){var e,t,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(i.e,i.sd())+4,u.rounding=1,n=i.d.length,n<3)i=Nt(u,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/dr(5,e)),i=Nt(u,2,i,i,!0);for(var a,s=new u(5),o=new u(16),c=new u(20);e--;)a=i.times(i),i=i.times(s.plus(a.times(o.times(a).plus(c))))}return u.precision=t,u.rounding=r,Y(i,t,r,!0)},R.hyperbolicTangent=R.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,le(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},R.inverseCosine=R.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,i=t.rounding;return r!==-1?r===0?e.isNeg()?it(t,n,i):new t(0):new t(NaN):e.isZero()?it(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))},R.inverseHyperbolicCosine=R.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,te=!1,r=r.times(r).minus(1).sqrt().plus(r),te=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},R.inverseHyperbolicSine=R.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,te=!1,r=r.times(r).plus(1).sqrt().plus(r),te=!0,n.precision=e,n.rounding=t,r.ln())},R.inverseHyperbolicTangent=R.atanh=function(){var e,t,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=u.precision,t=u.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?Y(new u(i),e,t,!0):(u.precision=r=n-i.e,i=le(i.plus(1),new u(1).minus(i),r+e,1),u.precision=e+4,u.rounding=1,i=i.ln(),u.precision=e,u.rounding=t,i.times(.5))):new u(NaN)},R.inverseSine=R.asin=function(){var e,t,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(t=i.abs().cmp(1),r=u.precision,n=u.rounding,t!==-1?t===0?(e=it(u,r+4,n).times(.5),e.s=i.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))},R.inverseTangent=R.atan=function(){var e,t,r,n,i,u,a,s,o,c=this,f=c.constructor,l=f.precision,d=f.rounding;if(c.isFinite()){if(c.isZero())return new f(c);if(c.abs().eq(1)&&l+4<=Rr)return a=it(f,l+4,d).times(.25),a.s=c.s,a}else{if(!c.s)return new f(NaN);if(l+4<=Rr)return a=it(f,l+4,d).times(.5),a.s=c.s,a}for(f.precision=s=l+10,f.rounding=1,r=Math.min(28,s/j+2|0),e=r;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(te=!1,t=Math.ceil(s/j),n=1,o=c.times(c),a=new f(c),i=c;e!==-1;)if(i=i.times(o),u=a.minus(i.div(n+=2)),i=i.times(o),a=u.plus(i.div(n+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===u.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),te=!0,Y(a,f.precision=l,f.rounding=d,!0)},R.isFinite=function(){return!!this.d},R.isInteger=R.isInt=function(){return!!this.d&&Re(this.e/j)>this.d.length-2},R.isNaN=function(){return!this.s},R.isNegative=R.isNeg=function(){return this.s<0},R.isPositive=R.isPos=function(){return this.s>0},R.isZero=function(){return!!this.d&&this.d[0]===0},R.lessThan=R.lt=function(e){return this.cmp(e)<0},R.lessThanOrEqualTo=R.lte=function(e){return this.cmp(e)<1},R.logarithm=R.log=function(e){var t,r,n,i,u,a,s,o,c=this,f=c.constructor,l=f.precision,d=f.rounding,D=5;if(e==null)e=new f(10),t=!0;else{if(e=new f(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=c.d,c.s<0||!r||!r[0]||c.eq(1))return new f(r&&!r[0]?-1/0:c.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(i=r[0];i%10===0;)i/=10;u=i!==1}if(te=!1,s=l+D,a=vt(c,s),n=t?lr(f,s+10):vt(e,s),o=le(a,n,s,1),Lt(o.d,i=l,d))do if(s+=10,a=vt(c,s),n=t?lr(f,s+10):vt(e,s),o=le(a,n,s,1),!u){+ze(o.d).slice(i+1,i+15)+1==1e14&&(o=Y(o,l+1,0));break}while(Lt(o.d,i+=10,d));return te=!0,Y(o,l,d)},R.minus=R.sub=function(e){var t,r,n,i,u,a,s,o,c,f,l,d,D=this,p=D.constructor;if(e=new p(e),!D.d||!e.d)return!D.s||!e.s?e=new p(NaN):D.d?e.s=-e.s:e=new p(e.d||D.s!==e.s?D:NaN),e;if(D.s!=e.s)return e.s=-e.s,D.plus(e);if(c=D.d,d=e.d,s=p.precision,o=p.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else if(c[0])e=new p(D);else return new p(o===3?-0:0);return te?Y(e,s,o):e}if(r=Re(e.e/j),f=Re(D.e/j),c=c.slice(),u=f-r,u){for(l=u<0,l?(t=c,u=-u,a=d.length):(t=d,r=f,a=c.length),n=Math.max(Math.ceil(s/j),a)+2,u>n&&(u=n,t.length=1),t.reverse(),n=u;n--;)t.push(0);t.reverse()}else{for(n=c.length,a=d.length,l=n<a,l&&(a=n),n=0;n<a;n++)if(c[n]!=d[n]){l=c[n]<d[n];break}u=0}for(l&&(t=c,c=d,d=t,e.s=-e.s),a=c.length,n=d.length-a;n>0;--n)c[a++]=0;for(n=d.length;n>u;){if(c[--n]<d[n]){for(i=n;i&&c[--i]===0;)c[i]=Ye-1;--c[i],c[n]+=Ye}c[n]-=d[n]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=cr(c,r),te?Y(e,s,o):e):new p(o===3?-0:0)},R.modulo=R.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?Y(new n(r),n.precision,n.rounding):(te=!1,n.modulo==9?(t=le(r,e.abs(),0,3,1),t.s*=e.s):t=le(r,e,0,n.modulo,1),t=t.times(e),te=!0,r.minus(t))},R.naturalExponential=R.exp=function(){return $r(this)},R.naturalLogarithm=R.ln=function(){return vt(this)},R.negated=R.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Y(e)},R.plus=R.add=function(e){var t,r,n,i,u,a,s,o,c,f,l=this,d=l.constructor;if(e=new d(e),!l.d||!e.d)return!l.s||!e.s?e=new d(NaN):l.d||(e=new d(e.d||l.s===e.s?l:NaN)),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(c=l.d,f=e.d,s=d.precision,o=d.rounding,!c[0]||!f[0])return f[0]||(e=new d(l)),te?Y(e,s,o):e;if(u=Re(l.e/j),n=Re(e.e/j),c=c.slice(),i=u-n,i){for(i<0?(r=c,i=-i,a=f.length):(r=f,n=u,a=c.length),u=Math.ceil(s/j),a=u>a?u+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=c.length,i=f.length,a-i<0&&(i=a,r=f,f=c,c=r),t=0;i;)t=(c[--i]=c[i]+f[i]+t)/Ye|0,c[i]%=Ye;for(t&&(c.unshift(t),++n),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=cr(c,n),te?Y(e,s,o):e},R.precision=R.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dt+e);return r.d?(t=Tn(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t},R.round=function(){var e=this,t=e.constructor;return Y(new t(e),e.e+1,t.rounding)},R.sine=R.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+j,n.rounding=1,r=Da(n,$n(n,r)),n.precision=e,n.rounding=t,Y(at>2?r.neg():r,e,t,!0)):new n(NaN)},R.squareRoot=R.sqrt=function(){var e,t,r,n,i,u,a=this,s=a.d,o=a.e,c=a.s,f=a.constructor;if(c!==1||!s||!s[0])return new f(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(te=!1,c=Math.sqrt(+a),c==0||c==1/0?(t=ze(s),(t.length+o)%2==0&&(t+="0"),c=Math.sqrt(t),o=Re((o+1)/2)-(o<0||o%2),c==1/0?t="5e"+o:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+o),n=new f(t)):n=new f(c.toString()),r=(o=f.precision)+3;;)if(u=n,n=u.plus(le(a,u,r+2,1)).times(.5),ze(u.d).slice(0,r)===(t=ze(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!i&&t=="4999"){if(!i&&(Y(u,o+1,0),u.times(u).eq(a))){n=u;break}r+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Y(n,o+1,1),e=!n.times(n).eq(a));break}return te=!0,Y(n,o,f.rounding,e)},R.tangent=R.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=le(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,Y(at==2||at==4?r.neg():r,e,t,!0)):new n(NaN)},R.times=R.mul=function(e){var t,r,n,i,u,a,s,o,c,f=this,l=f.constructor,d=f.d,D=(e=new l(e)).d;if(e.s*=f.s,!d||!d[0]||!D||!D[0])return new l(!e.s||d&&!d[0]&&!D||D&&!D[0]&&!d?NaN:!d||!D?e.s/0:e.s*0);for(r=Re(f.e/j)+Re(e.e/j),o=d.length,c=D.length,o<c&&(u=d,d=D,D=u,a=o,o=c,c=a),u=[],a=o+c,n=a;n--;)u.push(0);for(n=c;--n>=0;){for(t=0,i=o+n;i>n;)s=u[i]+D[n]*d[i-n-1]+t,u[i--]=s%Ye|0,t=s/Ye|0;u[i]=(u[i]+t)%Ye|0}for(;!u[--a];)u.pop();return t?++r:u.shift(),e.d=u,e.e=cr(u,r),te?Y(e,l.precision,l.rounding):e},R.toBinary=function(e,t){return Pr(this,2,e,t)},R.toDecimalPlaces=R.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Le(e,0,dt),t===void 0?t=n.rounding:Le(t,0,8),Y(r,e+r.e+1,t))},R.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=nt(n,!0):(Le(e,0,dt),t===void 0?t=i.rounding:Le(t,0,8),n=Y(new i(n),e+1,t),r=nt(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},R.toFixed=function(e,t){var r,n,i=this,u=i.constructor;return e===void 0?r=nt(i):(Le(e,0,dt),t===void 0?t=u.rounding:Le(t,0,8),n=Y(new u(i),e+i.e+1,t),r=nt(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},R.toFraction=function(e){var t,r,n,i,u,a,s,o,c,f,l,d,D=this,p=D.d,h=D.constructor;if(!p)return new h(D);if(c=r=new h(1),n=o=new h(0),t=new h(n),u=t.e=Tn(p)-D.e-1,a=u%j,t.d[0]=Me(10,a<0?j+a:a),e==null)e=u>0?t:c;else{if(s=new h(e),!s.isInt()||s.lt(c))throw Error(Dt+s);e=s.gt(t)?u>0?t:c:s}for(te=!1,s=new h(ze(p)),f=h.precision,h.precision=u=p.length*j*2;l=le(s,t,0,1,1),i=r.plus(l.times(n)),i.cmp(e)!=1;)r=n,n=i,i=c,c=o.plus(l.times(i)),o=i,i=t,t=s.minus(l.times(i)),s=i;return i=le(e.minus(r),n,0,1,1),o=o.plus(i.times(c)),r=r.plus(i.times(n)),o.s=c.s=D.s,d=le(c,n,u,1).minus(D).abs().cmp(le(o,r,u,1).minus(D).abs())<1?[c,n]:[o,r],h.precision=f,te=!0,d},R.toHexadecimal=R.toHex=function(e,t){return Pr(this,16,e,t)},R.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:Le(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(te=!1,r=le(r,e,0,t,1).times(e),te=!0,Y(r)):(e.s=r.s,r=e),r},R.toNumber=function(){return+this},R.toOctal=function(e,t){return Pr(this,8,e,t)},R.toPower=R.pow=function(e){var t,r,n,i,u,a,s=this,o=s.constructor,c=+(e=new o(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new o(Me(+s,c));if(s=new o(s),s.eq(1))return s;if(n=o.precision,u=o.rounding,e.eq(1))return Y(s,n,u);if(t=Re(e.e/j),t>=e.d.length-1&&(r=c<0?-c:c)<=ca)return i=On(o,s,r,n),e.s<0?new o(1).div(i):Y(i,n,u);if(a=s.s,a<0){if(t<e.d.length-1)return new o(NaN);if((e.d[t]&1)==0&&(a=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=a,s}return r=Me(+s,c),t=r==0||!isFinite(r)?Re(c*(Math.log("0."+ze(s.d))/Math.LN10+s.e+1)):new o(r+"").e,t>o.maxE+1||t<o.minE-1?new o(t>0?a/0:0):(te=!1,o.rounding=s.s=1,r=Math.min(12,(t+"").length),i=$r(e.times(vt(s,n+r)),n),i.d&&(i=Y(i,n+5,1),Lt(i.d,n,u)&&(t=n+10,i=Y($r(e.times(vt(s,t+r)),t),t+5,1),+ze(i.d).slice(n+1,n+15)+1==1e14&&(i=Y(i,n+1,0)))),i.s=a,te=!0,o.rounding=u,Y(i,n,u))},R.toPrecision=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=nt(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Le(e,1,dt),t===void 0?t=i.rounding:Le(t,0,8),n=Y(new i(n),e,t),r=nt(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},R.toSignificantDigits=R.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Le(e,1,dt),t===void 0?t=n.rounding:Le(t,0,8)),Y(new n(r),e,t)},R.toString=function(){var e=this,t=e.constructor,r=nt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},R.truncated=R.trunc=function(){return Y(new this.constructor(this),this.e+1,1)},R.valueOf=R.toJSON=function(){var e=this,t=e.constructor,r=nt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function ze(e){var t,r,n,i=e.length-1,u="",a=e[0];if(i>0){for(u+=a,t=1;t<i;t++)n=e[t]+"",r=j-n.length,r&&(u+=pt(r)),u+=n;a=e[t],n=a+"",r=j-n.length,r&&(u+=pt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return u+a}function Le(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Dt+e)}function Lt(e,t,r,n){var i,u,a,s;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=j,i=0):(i=Math.ceil((t+1)/j),t%=j),u=Me(10,j-t),s=e[i]%u|0,n==null?t<3?(t==0?s=s/100|0:t==1&&(s=s/10|0),a=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):a=(r<4&&s+1==u||r>3&&s+1==u/2)&&(e[i+1]/u/100|0)==Me(10,t-2)-1||(s==u/2||s==0)&&(e[i+1]/u/100|0)==0:t<4?(t==0?s=s/1e3|0:t==1?s=s/100|0:t==2&&(s=s/10|0),a=(n||r<4)&&s==9999||!n&&r>3&&s==4999):a=((n||r<4)&&s+1==u||!n&&r>3&&s+1==u/2)&&(e[i+1]/u/1e3|0)==Me(10,t-3)-1,a}function fr(e,t,r){for(var n,i=[0],u,a=0,s=e.length;a<s;){for(u=i.length;u--;)i[u]*=t;for(i[0]+=zr.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function ha(e,t){var r,n,i;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),i=(1/dr(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),e.precision+=r,t=Nt(e,1,t.times(i),new e(1));for(var u=r;u--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var le=function(){function e(n,i,u){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%u|0,s=a/u|0;return s&&n.unshift(s),n}function t(n,i,u,a){var s,o;if(u!=a)o=u>a?1:-1;else for(s=o=0;s<u;s++)if(n[s]!=i[s]){o=n[s]>i[s]?1:-1;break}return o}function r(n,i,u,a){for(var s=0;u--;)n[u]-=s,s=n[u]<i[u]?1:0,n[u]=s*a+n[u]-i[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,u,a,s,o){var c,f,l,d,D,p,h,m,F,_,w,y,v,g,C,E,B,b,M,I,U=n.constructor,O=n.s==i.s?1:-1,q=n.d,N=i.d;if(!q||!q[0]||!N||!N[0])return new U(!n.s||!i.s||(q?N&&q[0]==N[0]:!N)?NaN:q&&q[0]==0||!N?O*0:O/0);for(o?(D=1,f=n.e-i.e):(o=Ye,D=j,f=Re(n.e/D)-Re(i.e/D)),M=N.length,B=q.length,F=new U(O),_=F.d=[],l=0;N[l]==(q[l]||0);l++);if(N[l]>(q[l]||0)&&f--,u==null?(g=u=U.precision,a=U.rounding):s?g=u+(n.e-i.e)+1:g=u,g<0)_.push(1),p=!0;else{if(g=g/D+2|0,l=0,M==1){for(d=0,N=N[0],g++;(l<B||d)&&g--;l++)C=d*o+(q[l]||0),_[l]=C/N|0,d=C%N|0;p=d||l<B}else{for(d=o/(N[0]+1)|0,d>1&&(N=e(N,d,o),q=e(q,d,o),M=N.length,B=q.length),E=M,w=q.slice(0,M),y=w.length;y<M;)w[y++]=0;I=N.slice(),I.unshift(0),b=N[0],N[1]>=o/2&&++b;do d=0,c=t(N,w,M,y),c<0?(v=w[0],M!=y&&(v=v*o+(w[1]||0)),d=v/b|0,d>1?(d>=o&&(d=o-1),h=e(N,d,o),m=h.length,y=w.length,c=t(h,w,m,y),c==1&&(d--,r(h,M<m?I:N,m,o))):(d==0&&(c=d=1),h=N.slice()),m=h.length,m<y&&h.unshift(0),r(w,h,y,o),c==-1&&(y=w.length,c=t(N,w,M,y),c<1&&(d++,r(w,M<y?I:N,y,o))),y=w.length):c===0&&(d++,w=[0]),_[l++]=d,c&&w[0]?w[y++]=q[E]||0:(w=[q[E]],y=1);while((E++<B||w[0]!==void 0)&&g--);p=w[0]!==void 0}_[0]||_.shift()}if(D==1)F.e=f,xn=p;else{for(l=1,d=_[0];d>=10;d/=10)l++;F.e=l+f*D-1,Y(F,s?u+F.e+1:u,a,p)}return F}}();function Y(e,t,r,n){var i,u,a,s,o,c,f,l,d,D=e.constructor;e:if(t!=null){if(l=e.d,!l)return e;for(i=1,s=l[0];s>=10;s/=10)i++;if(u=t-i,u<0)u+=j,a=t,f=l[d=0],o=f/Me(10,i-a-1)%10|0;else if(d=Math.ceil((u+1)/j),s=l.length,d>=s)if(n){for(;s++<=d;)l.push(0);f=o=0,i=1,u%=j,a=u-j+1}else break e;else{for(f=s=l[d],i=1;s>=10;s/=10)i++;u%=j,a=u-j+i,o=a<0?0:f/Me(10,i-a-1)%10|0}if(n=n||t<0||l[d+1]!==void 0||(a<0?f:f%Me(10,i-a-1)),c=r<4?(o||n)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||n||r==6&&(u>0?a>0?f/Me(10,i-a):0:l[d-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,c?(t-=e.e+1,l[0]=Me(10,(j-t%j)%j),e.e=-t||0):l[0]=e.e=0,e;if(u==0?(l.length=d,s=1,d--):(l.length=d+1,s=Me(10,j-u),l[d]=a>0?(f/Me(10,i-a)%Me(10,a)|0)*s:0),c)for(;;)if(d==0){for(u=1,a=l[0];a>=10;a/=10)u++;for(a=l[0]+=s,s=1;a>=10;a/=10)s++;u!=s&&(e.e++,l[0]==Ye&&(l[0]=1));break}else{if(l[d]+=s,l[d]!=Ye)break;l[d--]=0,s=1}for(u=l.length;l[--u]===0;)l.pop()}return te&&(e.e>D.maxE?(e.d=null,e.e=NaN):e.e<D.minE&&(e.e=0,e.d=[0])),e}function nt(e,t,r){if(!e.isFinite())return Rn(e);var n,i=e.e,u=ze(e.d),a=u.length;return t?(r&&(n=r-a)>0?u=u.charAt(0)+"."+u.slice(1)+pt(n):a>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):i<0?(u="0."+pt(-i-1)+u,r&&(n=r-a)>0&&(u+=pt(n))):i>=a?(u+=pt(i+1-a),r&&(n=r-i-1)>0&&(u=u+"."+pt(n))):((n=i+1)<a&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(u+="."),u+=pt(n))),u}function cr(e,t){var r=e[0];for(t*=j;r>=10;r/=10)t++;return t}function lr(e,t,r){if(t>la)throw te=!0,r&&(e.precision=r),Error(bn);return Y(new e(ar),t,1,!0)}function it(e,t,r){if(t>Rr)throw Error(bn);return Y(new e(or),t,r,!0)}function Tn(e){var t=e.length-1,r=t*j+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function pt(e){for(var t="";e--;)t+="0";return t}function On(e,t,r,n){var i,u=new e(1),a=Math.ceil(n/j+4);for(te=!1;;){if(r%2&&(u=u.times(t),Pn(u.d,a)&&(i=!0)),r=Re(r/2),r===0){r=u.d.length-1,i&&u.d[r]===0&&++u.d[r];break}t=t.times(t),Pn(t.d,a)}return te=!0,u}function zn(e){return e.d[e.d.length-1]&1}function In(e,t,r){for(var n,i,u=new e(t[0]),a=0;++a<t.length;){if(i=new e(t[a]),!i.s){u=i;break}n=u.cmp(i),(n===r||n===0&&u.s===r)&&(u=i)}return u}function $r(e,t){var r,n,i,u,a,s,o,c=0,f=0,l=0,d=e.constructor,D=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(te=!1,o=p):o=t,s=new d(.03125);e.e>-2;)e=e.times(s),l+=5;for(n=Math.log(Me(2,l))/Math.LN10*2+5|0,o+=n,r=u=a=new d(1),d.precision=o;;){if(u=Y(u.times(e),o,1),r=r.times(++f),s=a.plus(le(u,r,o,1)),ze(s.d).slice(0,o)===ze(a.d).slice(0,o)){for(i=l;i--;)a=Y(a.times(a),o,1);if(t==null)if(c<3&&Lt(a.d,o-n,D,c))d.precision=o+=10,r=u=s=new d(1),f=0,c++;else return Y(a,d.precision=p,D,te=!0);else return d.precision=p,a}a=s}}function vt(e,t){var r,n,i,u,a,s,o,c,f,l,d,D=1,p=10,h=e,m=h.d,F=h.constructor,_=F.rounding,w=F.precision;if(h.s<0||!m||!m[0]||!h.e&&m[0]==1&&m.length==1)return new F(m&&!m[0]?-1/0:h.s!=1?NaN:m?0:h);if(t==null?(te=!1,f=w):f=t,F.precision=f+=p,r=ze(m),n=r.charAt(0),Math.abs(u=h.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=ze(h.d),n=r.charAt(0),D++;u=h.e,n>1?(h=new F("0."+r),u++):h=new F(n+"."+r.slice(1))}else return c=lr(F,f+2,w).times(u+""),h=vt(new F(n+"."+r.slice(1)),f-p).plus(c),F.precision=w,t==null?Y(h,w,_,te=!0):h;for(l=h,o=a=h=le(h.minus(1),h.plus(1),f,1),d=Y(h.times(h),f,1),i=3;;){if(a=Y(a.times(d),f,1),c=o.plus(le(a,new F(i),f,1)),ze(c.d).slice(0,f)===ze(o.d).slice(0,f))if(o=o.times(2),u!==0&&(o=o.plus(lr(F,f+2,w).times(u+""))),o=le(o,new F(D),f,1),t==null)if(Lt(o.d,f-p,_,s))F.precision=f+=p,c=a=h=le(l.minus(1),l.plus(1),f,1),d=Y(h.times(h),f,1),i=s=1;else return Y(o,F.precision=w,_,te=!0);else return F.precision=w,o;o=c,i+=2}}function Rn(e){return String(e.s*e.s/0)}function hr(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(n,i),t){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%j,r<0&&(n+=j),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=j;n<i;)e.d.push(+t.slice(n,n+=j));t=t.slice(n),n=j-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),te&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function da(e,t){var r,n,i,u,a,s,o,c,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Nn.test(t))return hr(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(sa.test(t))r=16,t=t.toLowerCase();else if(oa.test(t))r=2;else if(fa.test(t))r=8;else throw Error(Dt+t);for(u=t.search(/p/i),u>0?(o=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),a=u>=0,n=e.constructor,a&&(t=t.replace(".",""),s=t.length,u=s-u,i=On(n,new n(r),u,u*2)),c=fr(t,r,Ye),f=c.length-1,u=f;c[u]===0;--u)c.pop();return u<0?new n(e.s*0):(e.e=cr(c,f),e.d=c,te=!1,a&&(e=le(e,i,s*4)),o&&(e=e.times(Math.abs(o)<54?Me(2,o):Tt.pow(2,o))),te=!0,e)}function Da(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:Nt(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/dr(5,r)),t=Nt(e,2,t,t);for(var i,u=new e(5),a=new e(16),s=new e(20);r--;)i=t.times(t),t=t.times(u.plus(i.times(a.times(i).minus(s))));return t}function Nt(e,t,r,n,i){var u,a,s,o,c=e.precision,f=Math.ceil(c/j);for(te=!1,o=r.times(r),s=new e(n);;){if(a=le(s.times(o),new e(t++*t++),c,1),s=i?n.plus(a):n.minus(a),n=le(a.times(o),new e(t++*t++),c,1),a=s.plus(n),a.d[f]!==void 0){for(u=f;a.d[u]===s.d[u]&&u--;);if(u==-1)break}u=s,s=n,n=a,a=u}return te=!0,a.d.length=f+1,a}function dr(e,t){for(var r=e;--t;)r*=e;return r}function $n(e,t){var r,n=t.s<0,i=it(e,e.precision,1),u=i.times(.5);if(t=t.abs(),t.lte(u))return at=n?4:1,t;if(r=t.divToInt(i),r.isZero())at=n?3:2;else{if(t=t.minus(r.times(i)),t.lte(u))return at=zn(r)?n?2:3:n?4:1,t;at=zn(r)?n?1:4:n?3:2}return t.minus(i).abs()}function Pr(e,t,r,n){var i,u,a,s,o,c,f,l,d,D=e.constructor,p=r!==void 0;if(p?(Le(r,1,dt),n===void 0?n=D.rounding:Le(n,0,8)):(r=D.precision,n=D.rounding),!e.isFinite())f=Rn(e);else{for(f=nt(e),a=f.indexOf("."),p?(i=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):i=t,a>=0&&(f=f.replace(".",""),d=new D(1),d.e=f.length-a,d.d=fr(nt(d),10,i),d.e=d.d.length),l=fr(f,10,i),u=o=l.length;l[--o]==0;)l.pop();if(!l[0])f=p?"0p+0":"0";else{if(a<0?u--:(e=new D(e),e.d=l,e.e=u,e=le(e,d,r,n,0,i),l=e.d,u=e.e,c=xn),a=l[r],s=i/2,c=c||l[r+1]!==void 0,c=n<4?(a!==void 0||c)&&(n===0||n===(e.s<0?3:2)):a>s||a===s&&(n===4||c||n===6&&l[r-1]&1||n===(e.s<0?8:7)),l.length=r,c)for(;++l[--r]>i-1;)l[r]=0,r||(++u,l.unshift(1));for(o=l.length;!l[o-1];--o);for(a=0,f="";a<o;a++)f+=zr.charAt(l[a]);if(p){if(o>1)if(t==16||t==8){for(a=t==16?4:3,--o;o%a;o++)f+="0";for(l=fr(f,i,t),o=l.length;!l[o-1];--o);for(a=1,f="1.";a<o;a++)f+=zr.charAt(l[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>o)for(u-=o;u--;)f+="0";else u<o&&(f=f.slice(0,u)+"."+f.slice(u))}f=(t==16?"0x":t==2?"0b":t==8?"0o":"")+f}return e.s<0?"-"+f:f}function Pn(e,t){if(e.length>t)return e.length=t,!0}function pa(e){return new this(e).abs()}function va(e){return new this(e).acos()}function ga(e){return new this(e).acosh()}function ma(e,t){return new this(e).plus(t)}function wa(e){return new this(e).asin()}function ya(e){return new this(e).asinh()}function Aa(e){return new this(e).atan()}function Fa(e){return new this(e).atanh()}function Ea(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,u=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=it(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?it(this,n,i):new this(0),r.s=e.s):!e.d||t.isZero()?(r=it(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(le(e,t,u,1)),t=it(this,u,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(le(e,t,u,1)),r}function Ca(e){return new this(e).cbrt()}function _a(e){return Y(e=new this(e),e.e+1,2)}function Ba(e,t,r){return new this(e).clamp(t,r)}function xa(e){if(!e||typeof e!="object")throw Error(sr+"Object expected");var t,r,n,i=e.defaults===!0,u=["precision",1,dt,"rounding",0,8,"toExpNeg",-Mt,0,"toExpPos",0,Mt,"maxE",0,Mt,"minE",-Mt,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],i&&(this[r]=Ir[r]),(n=e[r])!==void 0)if(Re(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(Dt+r+": "+n);if(r="crypto",i&&(this[r]=Ir[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Sn);else this[r]=!1;else throw Error(Dt+r+": "+n);return this}function ba(e){return new this(e).cos()}function Sa(e){return new this(e).cosh()}function qn(e){var t,r,n;function i(u){var a,s,o,c=this;if(!(c instanceof i))return new i(u);if(c.constructor=i,Un(u)){c.s=u.s,te?!u.d||u.e>i.maxE?(c.e=NaN,c.d=null):u.e<i.minE?(c.e=0,c.d=[0]):(c.e=u.e,c.d=u.d.slice()):(c.e=u.e,c.d=u.d?u.d.slice():u.d);return}if(o=typeof u,o==="number"){if(u===0){c.s=1/u<0?-1:1,c.e=0,c.d=[0];return}if(u<0?(u=-u,c.s=-1):c.s=1,u===~~u&&u<1e7){for(a=0,s=u;s>=10;s/=10)a++;te?a>i.maxE?(c.e=NaN,c.d=null):a<i.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[u]):(c.e=a,c.d=[u]);return}if(u*0!==0){u||(c.s=NaN),c.e=NaN,c.d=null;return}return hr(c,u.toString())}if(o==="string")return(s=u.charCodeAt(0))===45?(u=u.slice(1),c.s=-1):(s===43&&(u=u.slice(1)),c.s=1),Nn.test(u)?hr(c,u):da(c,u);if(o==="bigint")return u<0?(u=-u,c.s=-1):c.s=1,hr(c,u.toString());throw Error(Dt+u)}if(i.prototype=R,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=xa,i.clone=qn,i.isDecimal=Un,i.abs=pa,i.acos=va,i.acosh=ga,i.add=ma,i.asin=wa,i.asinh=ya,i.atan=Aa,i.atanh=Fa,i.atan2=Ea,i.cbrt=Ca,i.ceil=_a,i.clamp=Ba,i.cos=ba,i.cosh=Sa,i.div=Ma,i.exp=Na,i.floor=Ta,i.hypot=Oa,i.ln=za,i.log=Ia,i.log10=$a,i.log2=Ra,i.max=Pa,i.min=qa,i.mod=Ua,i.mul=La,i.pow=Ga,i.random=Za,i.round=Ja,i.sign=Va,i.sin=Xa,i.sinh=ka,i.sqrt=Ha,i.sub=Wa,i.sum=Ya,i.tan=Ka,i.tanh=Qa,i.trunc=ja,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Ma(e,t){return new this(e).div(t)}function Na(e){return new this(e).exp()}function Ta(e){return Y(e=new this(e),e.e+1,3)}function Oa(){var e,t,r=new this(0);for(te=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return te=!0,new this(1/0);r=t}return te=!0,r.sqrt()}function Un(e){return e instanceof Tt||e&&e.toStringTag===Mn||!1}function za(e){return new this(e).ln()}function Ia(e,t){return new this(e).log(t)}function Ra(e){return new this(e).log(2)}function $a(e){return new this(e).log(10)}function Pa(){return In(this,arguments,-1)}function qa(){return In(this,arguments,1)}function Ua(e,t){return new this(e).mod(t)}function La(e,t){return new this(e).mul(t)}function Ga(e,t){return new this(e).pow(t)}function Za(e){var t,r,n,i,u=0,a=new this(1),s=[];if(e===void 0?e=this.precision:Le(e,1,dt),n=Math.ceil(e/j),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));u<n;)i=t[u],i>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:s[u++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);u<n;)i=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,u):(s.push(i%1e7),u+=4);u=n/4}else throw Error(Sn);else for(;u<n;)s[u++]=Math.random()*1e7|0;for(n=s[--u],e%=j,n&&e&&(i=Me(10,j-e),s[u]=(n/i|0)*i);s[u]===0;u--)s.pop();if(u<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=j)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<j&&(r-=j-n)}return a.e=r,a.d=s,a}function Ja(e){return Y(e=new this(e),e.e+1,this.rounding)}function Va(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Xa(e){return new this(e).sin()}function ka(e){return new this(e).sinh()}function Ha(e){return new this(e).sqrt()}function Wa(e,t){return new this(e).sub(t)}function Ya(){var e=0,t=arguments,r=new this(t[e]);for(te=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return te=!0,Y(r,this.precision,this.rounding)}function Ka(e){return new this(e).tan()}function Qa(e){return new this(e).tanh()}function ja(e){return Y(e=new this(e),e.e+1,1)}R[Symbol.for("nodejs.util.inspect.custom")]=R.toString,R[Symbol.toStringTag]="Decimal";var Tt=R.constructor=qn(Ir);ar=new Tt(ar),or=new Tt(or);var eo="BigNumber",to=["?on","config"],ro=Q(eo,to,e=>{var{on:t,config:r}=e,n=Tt.clone({precision:r.precision,modulo:Tt.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},t&&t("config",function(i,u){i.precision!==u.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const $e=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},Xe=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},no=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},qr=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Ot=function(){throw SyntaxError("Invalid Param")};function Ur(e,t){const r=Math.abs(e),n=Math.abs(t);return e===0?Math.log(n):t===0?Math.log(r):r<3e3&&n<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const io={re:0,im:0},yt=function(e,t){const r=io;if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return T.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return T.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):Ot();break;case"string":r.im=r.re=0;const n=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,u=0;n===null&&Ot();for(let a=0;a<n.length;a++){const s=n[a];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?u++:s==="i"||s==="I"?(i+u===0&&Ot(),n[a+1]!==" "&&!isNaN(n[a+1])?(r.im+=parseFloat((u%2?"-":"")+n[a+1]),a++):r.im+=parseFloat((u%2?"-":"")+"1"),i=u=0):((i+u===0||isNaN(s))&&Ot(),n[a+1]==="i"||n[a+1]==="I"?(r.im+=parseFloat((u%2?"-":"")+s),a++):r.re+=parseFloat((u%2?"-":"")+s),i=u=0))}i+u>0&&Ot();break;case"number":r.im=0,r.re=e;break;default:Ot()}return isNaN(r.re)||isNaN(r.im),r};function T(e,t){if(!(this instanceof T))return new T(e,t);const r=yt(e,t);this.re=r.re,this.im=r.im}T.prototype={re:0,im:0,sign:function(){const e=qr(this.re,this.im);return new T(this.re/e,this.im/e)},add:function(e,t){const r=yt(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?T.NAN:T.INFINITY:new T(this.re+r.re,this.im+r.im)},sub:function(e,t){const r=yt(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?T.NAN:T.INFINITY:new T(this.re-r.re,this.im-r.im)},mul:function(e,t){const r=yt(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;return n&&a||i&&u?T.NAN:n||i?T.INFINITY:r.im===0&&this.im===0?new T(this.re*r.re,0):new T(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){const r=yt(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;if(u&&a||n&&i)return T.NAN;if(a||n)return T.INFINITY;if(u||i)return T.ZERO;if(r.im===0)return new T(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const s=r.re/r.im,o=r.re*s+r.im;return new T((this.re*s+this.im)/o,(this.im*s-this.re)/o)}else{const s=r.im/r.re,o=r.im*s+r.re;return new T((this.re+this.im*s)/o,(this.im-this.re*s)/o)}},pow:function(e,t){const r=yt(e,t),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return T.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new T(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new T(Math.pow(this.im,r.re),0);case 1:return new T(0,Math.pow(this.im,r.re));case 2:return new T(-Math.pow(this.im,r.re),0);case 3:return new T(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return T.ZERO;const u=Math.atan2(this.im,this.re),a=Ur(this.re,this.im);let s=Math.exp(r.re*a-r.im*u),o=r.im*a+r.re*u;return new T(s*Math.cos(o),s*Math.sin(o))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new T(Math.sqrt(e),0):new T(0,Math.sqrt(-e));const r=qr(e,t);let n=Math.sqrt(.5*(r+Math.abs(e))),i=Math.abs(t)/(2*n);return e>=0?new T(n,t<0?-i:i):new T(i,t<0?-n:n)},exp:function(){const e=Math.exp(this.re);return this.im===0?new T(e,0):new T(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new T(Math.expm1(e)*Math.cos(t)+no(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new T(Math.log(e),0):new T(Ur(e,t),Math.atan2(t,e))},abs:function(){return qr(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new T(Math.sin(e)*$e(t),Math.cos(e)*Xe(t))},cos:function(){const e=this.re,t=this.im;return new T(Math.cos(e)*$e(t),-Math.sin(e)*Xe(t))},tan:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)+$e(t);return new T(Math.sin(e)/r,Xe(t)/r)},cot:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)-$e(t);return new T(-Math.sin(e)/r,Xe(t)/r)},sec:function(){const e=this.re,t=this.im,r=.5*$e(2*t)+.5*Math.cos(2*e);return new T(Math.cos(e)*$e(t)/r,Math.sin(e)*Xe(t)/r)},csc:function(){const e=this.re,t=this.im,r=.5*$e(2*t)-.5*Math.cos(2*e);return new T(Math.sin(e)*$e(t)/r,-Math.cos(e)*Xe(t)/r)},asin:function(){const e=this.re,t=this.im,r=new T(t*t-e*e+1,-2*e*t).sqrt(),n=new T(r.re-t,r.im+e).log();return new T(n.im,-n.re)},acos:function(){const e=this.re,t=this.im,r=new T(t*t-e*e+1,-2*e*t).sqrt(),n=new T(r.re-t,r.im+e).log();return new T(Math.PI/2-n.im,n.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new T(0,1/0);if(t===-1)return new T(0,-1/0)}const r=e*e+(1-t)*(1-t),n=new T((1-t*t-e*e)/r,-2*e/r).log();return new T(-.5*n.im,.5*n.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new T(Math.atan2(1,e),0);const r=e*e+t*t;return r!==0?new T(e/r,-t/r).atan():new T(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new T(0,1/0);const r=e*e+t*t;return r!==0?new T(e/r,-t/r).acos():new T(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new T(Math.PI/2,1/0);const r=e*e+t*t;return r!==0?new T(e/r,-t/r).asin():new T(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new T(Xe(e)*Math.cos(t),$e(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new T($e(e)*Math.cos(t),Xe(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,r=$e(e)+Math.cos(t);return new T(Xe(e)/r,Math.sin(t)/r)},coth:function(){const e=2*this.re,t=2*this.im,r=$e(e)-Math.cos(t);return new T(Xe(e)/r,-Math.sin(t)/r)},csch:function(){const e=this.re,t=this.im,r=Math.cos(2*t)-$e(2*e);return new T(-2*Xe(e)*Math.cos(t)/r,2*$e(e)*Math.sin(t)/r)},sech:function(){const e=this.re,t=this.im,r=Math.cos(2*t)+$e(2*e);return new T(2*$e(e)*Math.cos(t)/r,-2*Xe(e)*Math.sin(t)/r)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,r=e>1&&t===0,n=1-e,i=1+e,u=n*n+t*t,a=u!==0?new T((i*n-t*t)/u,(t*n+i*t)/u):new T(e!==-1?e/0:0,t!==0?t/0:0),s=a.re;return a.re=Ur(a.re,a.im)/2,a.im=Math.atan2(a.im,s)/2,r&&(a.im=-a.im),a},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new T(0,Math.PI/2);const r=e*e+t*t;return r!==0?new T(e/r,-t/r).atanh():new T(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new T(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const r=e*e+t*t;return r!==0?new T(e/r,-t/r).asinh():new T(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return T.INFINITY;const r=e*e+t*t;return r!==0?new T(e/r,-t/r).acosh():new T(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return T.INFINITY;if(this.isInfinite())return T.ZERO;const e=this.re,t=this.im,r=e*e+t*t;return new T(e/r,-t/r)},conjugate:function(){return new T(this.re,-this.im)},neg:function(){return new T(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new T(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new T(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new T(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const r=yt(e,t);return Math.abs(r.re-this.re)<=T.EPSILON&&Math.abs(r.im-this.im)<=T.EPSILON},clone:function(){return new T(this.re,this.im)},toString:function(){let e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<T.EPSILON&&(e=0),Math.abs(t)<T.EPSILON&&(t=0),t===0?r+e:(e!==0?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),t!==1&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}},T.ZERO=new T(0,0),T.ONE=new T(1,0),T.I=new T(0,1),T.PI=new T(Math.PI,0),T.E=new T(Math.E,0),T.INFINITY=new T(1/0,1/0),T.NAN=new T(NaN,NaN),T.EPSILON=1e-15;var uo="Complex",ao=[],oo=Q(uo,ao,()=>(Object.defineProperty(T,"name",{value:"Complex"}),T.prototype.constructor=T,T.prototype.type="Complex",T.prototype.isComplex=!0,T.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},T.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},T.prototype.format=function(e){var t="",r=this.im,n=this.re,i=Or(this.re,e),u=Or(this.im,e),a=De(e)?e:e?e.precision:null;if(a!==null){var s=Math.pow(10,-a);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?t=i:n===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=i+" - i":t=i+" - "+u.substring(1)+"i":r===1?t=i+" + i":t=i+" + "+u+"i",t},T.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return T(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(De(r)){if(gn(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),De(n))return new T({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},T.prototype.valueOf=T.prototype.toString,T.fromJSON=function(e){return new T(e)},T.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},T),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const K=BigInt(0),re=BigInt(1),Gt=BigInt(2),Lr=BigInt(5),Ge=BigInt(10),so=2e3,Z={s:re,n:K,d:re};function ot(e,t){try{e=BigInt(e)}catch{throw gt()}return e*t}function Ke(e){return typeof e=="bigint"?e:Math.floor(e)}function me(e,t){if(t===K)throw Gr();const r=Object.create(ke.prototype);r.s=e<K?-re:re,e=e<K?-e:e;const n=At(e,t);return r.n=e/n,r.d=t/n,r}function zt(e){const t={};let r=e,n=Gt,i=Lr-re;for(;i<=r;){for(;r%n===K;)r/=n,t[n]=(t[n]||K)+re;i+=re+Gt*n++}return r!==e?r>1&&(t[r]=(t[r]||K)+re):t[e]=(t[e]||K)+re,t}const Ne=function(e,t){let r=K,n=re,i=re;if(e!=null)if(t!==void 0){if(typeof e=="bigint")r=e;else{if(isNaN(e))throw gt();if(e%1!==0)throw Ln();r=BigInt(e)}if(typeof t=="bigint")n=t;else{if(isNaN(t))throw gt();if(t%1!==0)throw Ln();n=BigInt(t)}i=r*n}else if(typeof e=="object"){if("d"in e&&"n"in e)r=BigInt(e.n),n=BigInt(e.d),"s"in e&&(r*=BigInt(e.s));else if(0 in e)r=BigInt(e[0]),1 in e&&(n=BigInt(e[1]));else if(typeof e=="bigint")r=e;else throw gt();i=r*n}else if(typeof e=="number"){if(isNaN(e))throw gt();if(e<0&&(i=-re,e=-e),e%1===0)r=BigInt(e);else{let u=1,a=0,s=1,o=1,c=1,f=1e7;for(e>=1&&(u=10**Math.floor(1+Math.log10(e)),e/=u);s<=f&&c<=f;){let l=(a+o)/(s+c);if(e===l){s+c<=f?(r=a+o,n=s+c):c>s?(r=o,n=c):(r=a,n=s);break}else e>l?(a+=o,s+=c):(o+=a,c+=s),s>f?(r=o,n=c):(r=a,n=s)}r=BigInt(r)*BigInt(u),n=BigInt(n)}}else if(typeof e=="string"){let u=0,a=K,s=K,o=K,c=re,f=re,l=e.replace(/_/g,"").match(/\d+|./g);if(l===null)throw gt();if(l[u]==="-"?(i=-re,u++):l[u]==="+"&&u++,l.length===u+1?s=ot(l[u++],i):l[u+1]==="."||l[u]==="."?(l[u]!=="."&&(a=ot(l[u++],i)),u++,(u+1===l.length||l[u+1]==="("&&l[u+3]===")"||l[u+1]==="'"&&l[u+3]==="'")&&(s=ot(l[u],i),c=Ge**BigInt(l[u].length),u++),(l[u]==="("&&l[u+2]===")"||l[u]==="'"&&l[u+2]==="'")&&(o=ot(l[u+1],i),f=Ge**BigInt(l[u+1].length)-re,u+=3)):l[u+1]==="/"||l[u+1]===":"?(s=ot(l[u],i),c=ot(l[u+2],re),u+=3):l[u+3]==="/"&&l[u+1]===" "&&(a=ot(l[u],i),s=ot(l[u+2],i),c=ot(l[u+4],re),u+=5),l.length<=u)n=c*f,i=r=o+n*a+f*s;else throw gt()}else if(typeof e=="bigint")r=e,i=e,n=re;else throw gt();if(n===K)throw Gr();Z.s=i<K?-re:re,Z.n=r<K?-r:r,Z.d=n<K?-n:n};function fo(e,t,r){let n=re;for(;t>K;e=e*e%r,t>>=re)t&re&&(n=n*e%r);return n}function co(e,t){for(;t%Gt===K;t/=Gt);for(;t%Lr===K;t/=Lr);if(t===re)return K;let r=Ge%t,n=1;for(;r!==re;n++)if(r=r*Ge%t,n>so)return K;return BigInt(n)}function lo(e,t,r){let n=re,i=fo(Ge,r,t);for(let u=0;u<300;u++){if(n===i)return BigInt(u);n=n*Ge%t,i=i*Ge%t}return 0}function At(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function ke(e,t){if(Ne(e,t),this instanceof ke)e=At(Z.d,Z.n),this.s=Z.s,this.n=Z.n/e,this.d=Z.d/e;else return me(Z.s*Z.n,Z.d)}var Gr=function(){return new Error("Division by Zero")},gt=function(){return new Error("Invalid argument")},Ln=function(){return new Error("Parameters must be integer")};ke.prototype={s:re,n:K,d:re,abs:function(){return me(this.n,this.d)},neg:function(){return me(-this.s*this.n,this.d)},add:function(e,t){return Ne(e,t),me(this.s*this.n*Z.d+Z.s*this.d*Z.n,this.d*Z.d)},sub:function(e,t){return Ne(e,t),me(this.s*this.n*Z.d-Z.s*this.d*Z.n,this.d*Z.d)},mul:function(e,t){return Ne(e,t),me(this.s*Z.s*this.n*Z.n,this.d*Z.d)},div:function(e,t){return Ne(e,t),me(this.s*Z.s*this.n*Z.d,this.d*Z.n)},clone:function(){return me(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return me(this.s*this.n%this.d,re);if(Ne(e,t),K===Z.n*this.d)throw Gr();return me(this.s*(Z.d*this.n)%(Z.n*this.d),Z.d*this.d)},gcd:function(e,t){return Ne(e,t),me(At(Z.n,this.n)*At(Z.d,this.d),Z.d*this.d)},lcm:function(e,t){return Ne(e,t),Z.n===K&&this.n===K?me(K,re):me(Z.n*this.n,At(Z.n,this.n)*At(Z.d,this.d))},inverse:function(){return me(this.s*this.d,this.n)},pow:function(e,t){if(Ne(e,t),Z.d===re)return Z.s<K?me((this.s*this.d)**Z.n,this.n**Z.n):me((this.s*this.n)**Z.n,this.d**Z.n);if(this.s<K)return null;let r=zt(this.n),n=zt(this.d),i=re,u=re;for(let a in r)if(a!=="1"){if(a==="0"){i=K;break}if(r[a]*=Z.n,r[a]%Z.d===K)r[a]/=Z.d;else return null;i*=BigInt(a)**r[a]}for(let a in n)if(a!=="1"){if(n[a]*=Z.n,n[a]%Z.d===K)n[a]/=Z.d;else return null;u*=BigInt(a)**n[a]}return Z.s<K?me(u,i):me(i,u)},log:function(e,t){if(Ne(e,t),this.s<=K||Z.s<=K)return null;const r={},n=zt(Z.n),i=zt(Z.d),u=zt(this.n),a=zt(this.d);for(const c in i)n[c]=(n[c]||K)-i[c];for(const c in a)u[c]=(u[c]||K)-a[c];for(const c in n)c!=="1"&&(r[c]=!0);for(const c in u)c!=="1"&&(r[c]=!0);let s=null,o=null;for(const c in r){const f=n[c]||K,l=u[c]||K;if(f===K){if(l!==K)return null;continue}let d=l,D=f;const p=At(d,D);if(d/=p,D/=p,s===null&&o===null)s=d,o=D;else if(d*o!==s*D)return null}return s!==null&&o!==null?me(s,o):null},equals:function(e,t){return Ne(e,t),this.s*this.n*Z.d===Z.s*Z.n*this.d},lt:function(e,t){return Ne(e,t),this.s*this.n*Z.d<Z.s*Z.n*this.d},lte:function(e,t){return Ne(e,t),this.s*this.n*Z.d<=Z.s*Z.n*this.d},gt:function(e,t){return Ne(e,t),this.s*this.n*Z.d>Z.s*Z.n*this.d},gte:function(e,t){return Ne(e,t),this.s*this.n*Z.d>=Z.s*Z.n*this.d},compare:function(e,t){Ne(e,t);let r=this.s*this.n*Z.d-Z.s*Z.n*this.d;return(K<r)-(r<K)},ceil:function(e){return e=Ge**BigInt(e||0),me(Ke(this.s*e*this.n/this.d)+(e*this.n%this.d>K&&this.s>=K?re:K),e)},floor:function(e){return e=Ge**BigInt(e||0),me(Ke(this.s*e*this.n/this.d)-(e*this.n%this.d>K&&this.s<K?re:K),e)},round:function(e){return e=Ge**BigInt(e||0),me(Ke(this.s*e*this.n/this.d)+this.s*((this.s>=K?re:K)+Gt*(e*this.n%this.d)>this.d?re:K),e)},roundTo:function(e,t){Ne(e,t);const r=this.n*Z.d,n=this.d*Z.n,i=r%n;let u=Ke(r/n);return i+i>=n&&u++,me(this.s*u*Z.n,Z.d)},divisible:function(e,t){return Ne(e,t),!(!(Z.n*this.d)||this.n*Z.d%(Z.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,r=this.d;e=e||15;let n=co(t,r),i=lo(t,r,n),u=this.s<K?"-":"";if(u+=Ke(t/r),t%=r,t*=Ge,t&&(u+="."),n){for(let a=i;a--;)u+=Ke(t/r),t%=r,t*=Ge;u+="(";for(let a=n;a--;)u+=Ke(t/r),t%=r,t*=Ge;u+=")"}else for(let a=e;t&&a--;)u+=Ke(t/r),t%=r,t*=Ge;return u},toFraction:function(e){let t=this.n,r=this.d,n=this.s<K?"-":"";if(r===re)n+=t;else{let i=Ke(t/r);e&&i>K&&(n+=i,n+=" ",t%=r),n+=t,n+="/",n+=r}return n},toLatex:function(e){let t=this.n,r=this.d,n=this.s<K?"-":"";if(r===re)n+=t;else{let i=Ke(t/r);e&&i>K&&(n+=i,t%=r),n+="\\frac{",n+=t,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let e=this.n,t=this.d,r=[];do{r.push(Ke(e/t));let n=e%t;e=t,t=n}while(e!==re);return r},simplify:function(e){const t=BigInt(1/(e||.001)|0),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let u=me(n[i-1],re);for(let s=i-2;s>=0;s--)u=u.inverse().add(n[s]);let a=u.sub(r);if(a.n*t<a.d)return u.mul(this.s)}return this}};var ho="Fraction",Do=[],po=Q(ho,Do,()=>(Object.defineProperty(ke,"name",{value:"Fraction"}),ke.prototype.constructor=ke,ke.prototype.type="Fraction",ke.prototype.isFraction=!0,ke.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ke.fromJSON=function(e){return new ke(e)},ke),{isClass:!0}),vo="Matrix",go=[],mo=Q(vo,go,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function Zr(e,t,r){var n=e.constructor,i=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ce(r))throw new Error("size must be an integer");if(e.greaterThan(i.pow(r-1).sub(1))||e.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function wo(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=Fn(t);switch(r){case"fixed":return Ao(e,n);case"exponential":return Gn(e,n);case"engineering":return yo(e,n);case"bin":return Zr(e,2,i);case"oct":return Zr(e,8,i);case"hex":return Zr(e,16,i);case"auto":{var u=Zn(t==null?void 0:t.lowerExp,-3),a=Zn(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var s,o=e.toSignificantDigits(n),c=o.e;return c>=u&&c<a?s=o.toFixed():s=Gn(e,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],l=arguments[4];return f!=="."?f+l:l})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function yo(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),u=i.toPrecision(t);if(u.includes("e")){var a=e.constructor;u=new a(u).toFixed()}return u+"e"+(r>=0?"+":"")+n.toString()}function Gn(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Ao(e,t){return e.toFixed(t)}function Zn(e,t){return De(e)?e:ye(e)?e.toNumber():t}function Ae(e,t){var r=Fo(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function Fo(e,t){if(typeof e=="number")return Or(e,t);if(ye(e))return wo(e,t);if(Eo(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return Xn(e,t);if(rt(e))return Jn(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>Jn(n)+": "+Ae(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Jn(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);r+=i in Vn?Vn[i]:i,n++}return'"'+r+'"'}var Vn={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Xn(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Xn(e[i],t);return r+="]",r}else return Ae(e,t)}function Eo(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function ne(e,t,r){if(!(this instanceof ne))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}ne.prototype=new RangeError,ne.prototype.constructor=RangeError,ne.prototype.name="DimensionError",ne.prototype.isDimensionError=!0;function Ft(e,t,r){if(!(this instanceof Ft))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ft.prototype=new RangeError,Ft.prototype.constructor=RangeError,Ft.prototype.name="IndexError",Ft.prototype.isIndexError=!0;function Pe(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function kn(e,t,r){var n,i=e.length;if(i!==t[r])throw new ne(i,t[r]);if(r<t.length-1){var u=r+1;for(n=0;n<i;n++){var a=e[n];if(!Array.isArray(a))throw new ne(t.length-1,t.length,"<");kn(e[n],t,u)}}else for(n=0;n<i;n++)if(Array.isArray(e[n]))throw new ne(t.length+1,t.length,">")}function Hn(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new ne(e.length,0)}else kn(e,t,0)}function Fe(e,t){if(e!==void 0){if(!De(e)||!Ce(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Ft(e,t)}}function Dr(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!De(i)||!Ce(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ae(t)+")")}),(De(e)||ye(e))&&(e=[e]);var n=r!==void 0?r:0;return Jr(e,t,0,n),e}function Jr(e,t,r,n){var i,u,a=e.length,s=t[r],o=Math.min(a,s);if(e.length=s,r<t.length-1){var c=r+1;for(i=0;i<o;i++)u=e[i],Array.isArray(u)||(u=[u],e[i]=u),Jr(u,t,c,n);for(i=o;i<s;i++)u=[],e[i]=u,Jr(u,t,c,n)}else{for(i=0;i<o;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=o;i<s;i++)e[i]=n}}function Wn(e,t){var r=Xr(e,!0),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new ne(0,n,"!=");t=Vr(t,n);var i=Yn(t);if(n!==i)throw new ne(i,n,"!=");try{return Co(r,t)}catch(u){throw u instanceof ne?new ne(i,n,"!="):u}}function Vr(e,t){var r=Yn(e),n=e.slice(),i=-1,u=e.indexOf(i),a=e.indexOf(i,u+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var s=u>=0,o=t%r===0;if(s)if(o)n[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Yn(e){return e.reduce((t,r)=>t*r,1)}function Co(e,t){for(var r=e,n,i=t.length-1;i>0;i--){var u=t[i];n=[];for(var a=r.length/u,s=0;s<a;s++)n.push(r.slice(s*u,(s+1)*u));r=n}return r}function Kn(e,t,r,n){var i=n||Pe(e);if(r)for(var u=0;u<r;u++)e=[e],i.unshift(1);for(e=Qn(e,t,0);i.length<t;)i.push(1);return e}function Qn(e,t,r){var n,i;if(Array.isArray(e)){var u=r+1;for(n=0,i=e.length;n<i;n++)e[n]=Qn(e[n],t,u)}else for(var a=r;a<t;a++)e=[e];return e}function Xr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(e))return e;if(typeof t!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return t?i(e):n(e),r;function n(u){for(var a=0;a<u.length;a++){var s=u[a];Array.isArray(s)?n(s):r.push(s)}}function i(u){if(Array.isArray(u[0]))for(var a=0;a<u.length;a++)i(u[a]);else for(var s=0;s<u.length;s++)r.push(u[s])}}function kr(e,t){for(var r,n=0,i=0;i<e.length;i++){var u=e[i],a=Array.isArray(u);if(i===0&&a&&(n=u.length),a&&u.length!==n)return;var s=a?kr(u,t):t(u);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function jn(e,t,r,n){if(n<r){if(e.length!==t.length)throw new ne(e.length,t.length);for(var i=[],u=0;u<e.length;u++)i[u]=jn(e[u],t[u],r,n+1);return i}else return e.concat(t)}function ei(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,n){return jn(r,n,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function Hr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=t.map(d=>d.length),i=Math.max(...n),u=new Array(i).fill(null),a=0;a<t.length;a++)for(var s=t[a],o=n[a],c=0;c<o;c++){var f=i-o+c;s[c]>u[f]&&(u[f]=s[c])}for(var l=0;l<t.length;l++)ti(t[l],u);return u}function ti(e,t){for(var r=t.length,n=e.length,i=0;i<n;i++){var u=r-n+i;if(e[i]<t[u]&&e[i]>1||e[i]>t[u])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(n," with size ").concat(e[i]," to size ").concat(t[u]))}}function Et(e,t){var r=Pe(e);if(ht(r,t))return e;ti(r,t);var n=Hr(r,t),i=n.length,u=[...Array(i-r.length).fill(1),...r],a=Bo(e);r.length<i&&(a=Wn(a,u),r=Pe(a));for(var s=0;s<i;s++)r[s]<n[s]&&(a=_o(a,n[s],s),r=Pe(a));return a}function _o(e,t,r){return ei(...Array(t).fill(e),r)}function Wr(e,t){if(!Array.isArray(e))throw new Error("Array expected");var r=Pe(e);if(t.length!==r.length)throw new ne(t.length,r.length);for(var n=0;n<t.length;n++)Fe(t[n],r[n]);return t.reduce((i,u)=>i[u],e)}function Yr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.length===0)return[];if(r)return u(e);var n=[];return i(e,0);function i(a,s){if(Array.isArray(a)){for(var o=a.length,c=Array(o),f=0;f<o;f++)n[s]=f,c[f]=i(a[f],s+1);return c}else return t(a,n.slice(0,s),e)}function u(a){if(Array.isArray(a)){for(var s=a.length,o=Array(s),c=0;c<s;c++)o[c]=u(a[c]);return o}else return t(a)}}function Bo(e){return et([],e)}function Zt(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(jt.isTypedFunction(e)){var i;if(n)i=1;else{var u=(t.isMatrix?t.size():Pe(t)).map(()=>0),a=t.isMatrix?t.get(u):Wr(t,u);i=So(e,a,u,t)}var s;if(t.isMatrix&&t.dataType!=="mixed"&&t.dataType!==void 0){var o=xo(e,i);s=o!==void 0?o:e}else s=e;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var f=arguments.length,l=new Array(f),d=0;d<f;d++)l[d]=arguments[d];return ri(s,l.slice(0,i),r,e.name)}}:{isUnary:!1,fn:function(){for(var f=arguments.length,l=new Array(f),d=0;d<f;d++)l[d]=arguments[d];return ri(s,l,r,e.name)}}}return n===void 0?{isUnary:bo(e),fn:e}:{isUnary:n,fn:e}}function xo(e,t){var r=[];if(Object.entries(e.signatures).forEach(n=>{var[i,u]=n;i.split(",").length===t&&r.push(u)}),r.length===1)return r[0]}function bo(e){if(e.length!==1)return!1;var t=e.toString();if(/arguments/.test(t))return!1;var r=t.match(/\(.*?\)/);return!/\.\.\./.test(r)}function So(e,t,r,n){for(var i=[t,r,n],u=3;u>0;u--){var a=i.slice(0,u);if(jt.resolve(e,a)!==null)return u}}function ri(e,t,r,n){try{return e(...t)}catch(i){Mo(i,t,r,n)}}function Mo(e,t,r,n){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var u=[];throw u.push("value: ".concat(lt(t[0]))),t.length>=2&&u.push("index: ".concat(lt(t[1]))),t.length>=3&&u.push("array: ".concat(lt(t[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(u.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(e.message))}var No="DenseMatrix",To=["Matrix"],Oo=Q(No,To,e=>{var{Matrix:t}=e;function r(f,l){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(l&&!rt(l))throw new Error("Invalid datatype: "+l);if(we(f))f.type==="DenseMatrix"?(this._data=ve(f._data),this._size=ve(f._size),this._datatype=l||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=l||f._datatype);else if(f&&Se(f.data)&&Se(f.size))this._data=f.data,this._size=f.size,Hn(this._data,this._size),this._datatype=l||f.datatype;else if(Se(f))this._data=c(f),this._size=Pe(this._data),Hn(this._data,this._size),this._datatype=l;else{if(f)throw new TypeError("Unsupported type of data ("+lt(f)+")");this._data=[],this._size=[0],this._datatype=l}}r.prototype=new t,r.prototype.createDenseMatrix=function(f,l){return new r(f,l)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return kr(this._data,lt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,l){return new r(f,l)},r.prototype.subset=function(f,l,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return u(this,f,l,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){return Wr(this._data,f)},r.prototype.set=function(f,l,d){if(!Se(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new ne(f.length,this._size.length,"<");var D,p,h,m=f.map(function(_){return _+1});o(this,m,d);var F=this._data;for(D=0,p=f.length-1;D<p;D++)h=f[D],Fe(h,F.length),F=F[h];return h=f[f.length-1],Fe(h,F.length),F[h]=l,this};function n(f,l){if(!Mr(l))throw new TypeError("Invalid index");var d=l.isScalar();if(d)return f.get(l.min());var D=l.size();if(D.length!==f._size.length)throw new ne(D.length,f._size.length);for(var p=l.min(),h=l.max(),m=0,F=f._size.length;m<F;m++)Fe(p[m],f._size[m]),Fe(h[m],f._size[m]);var _=new r([]),w=i(f._data,l);return _._size=w.size,_._datatype=f._datatype,_._data=w.data,_}function i(f,l){var d=l.size().length-1,D=Array(d);return{data:p(f),size:D};function p(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=l.dimension(m);return D[m]=F.size()[0],m<d?F.map(_=>(Fe(_,h.length),p(h[_],m+1))).valueOf():F.map(_=>(Fe(_,h.length),h[_])).valueOf()}}function u(f,l,d,D){if(!l||l.isIndex!==!0)throw new TypeError("Invalid index");var p=l.size(),h=l.isScalar(),m;if(we(d)?(m=d.size(),d=d.valueOf()):m=Pe(d),h){if(m.length!==0)throw new TypeError("Scalar expected");f.set(l.min(),d,D)}else{if(!ht(m,p))try{m.length===0?d=Et([d],p):d=Et(d,p),m=Pe(d)}catch{}if(p.length<f._size.length)throw new ne(p.length,f._size.length,"<");if(m.length<p.length){for(var F=0,_=0;p[F]===1&&m[F]===1;)F++;for(;p[F]===1;)_++,F++;d=Kn(d,p.length,_,m)}if(!ht(p,m))throw new ne(p,m,">");var w=l.max().map(function(y){return y+1});o(f,w,D),a(f._data,l,d)}return f}function a(f,l,d){var D=l.size().length-1;p(f,d);function p(h,m){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=l.dimension(F);F<D?_.forEach((w,y)=>{Fe(w,h.length),p(h[w],m[y[0]],F+1)}):_.forEach((w,y)=>{Fe(w,h.length),h[w]=m[y[0]]})}}r.prototype.resize=function(f,l,d){if(!Qt(f))throw new TypeError("Array or Matrix expected");var D=f.valueOf().map(h=>Array.isArray(h)&&h.length===1?h[0]:h),p=d?this.clone():this;return s(p,D,l)};function s(f,l,d){if(l.length===0){for(var D=f._data;Se(D);)D=D[0];return D}return f._size=l.slice(0),f._data=Dr(f._data,f._size,d),f}r.prototype.reshape=function(f,l){var d=l?this.clone():this;d._data=Wn(d._data,f);var D=d._size.reduce((p,h)=>p*h);return d._size=Vr(f,D),d};function o(f,l,d){for(var D=f._size.slice(0),p=!1;D.length<l.length;)D.push(0),p=!0;for(var h=0,m=l.length;h<m;h++)l[h]>D[h]&&(D[h]=l[h],p=!0);p&&s(f,D,d)}r.prototype.clone=function(){var f=new r({data:ve(this._data),size:ve(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,D=d._size.length-1;if(D<0)return d.clone();var p=Zt(f,d,"map",l),h=p.fn,m=d.create(void 0,d._datatype);if(m._size=d._size,l||p.isUnary)return m._data=g(d._data),m;if(D===0){for(var F=d.valueOf(),_=Array(F.length),w=0;w<F.length;w++)_[w]=h(F[w],[w],d);return m._data=_,m}var y=[];return m._data=v(d._data),m;function v(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=Array(C.length);if(E<D)for(var b=0;b<C.length;b++)y[E]=b,B[b]=v(C[b],E+1);else for(var M=0;M<C.length;M++)y[E]=M,B[M]=h(C[M],y.slice(),d);return B}function g(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=Array(C.length);if(E<D)for(var b=0;b<C.length;b++)B[b]=g(C[b],E+1);else for(var M=0;M<C.length;M++)B[M]=h(C[M]);return B}},r.prototype.forEach=function(f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,D=d._size.length-1;if(D<0)return;var p=Zt(f,d,"map",l),h=p.fn;if(l||p.isUnary){w(d._data);return}if(D===0){for(var m=0;m<d._data.length;m++)h(d._data[m],[m],d);return}var F=[];_(d._data);function _(y){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(v<D)for(var g=0;g<y.length;g++)F[v]=g,_(y[g],v+1);else for(var C=0;C<y.length;C++)F[v]=C,h(y[C],F.slice(),d)}function w(y){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(v<D)for(var g=0;g<y.length;g++)w(y[g],v+1);else for(var C=0;C<y.length;C++)h(y[C])}},r.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var l=0;l<this._data.length;l++)yield{value:this._data[l],index:[l]};return}var d=[],D=function*(h,m){if(m<f)for(var F=0;F<h.length;F++)d[m]=F,yield*D(h[F],m+1);else for(var _=0;_<h.length;_++)d[m]=_,yield{value:h[_],index:d.slice()}};yield*D(this._data,0)}},r.prototype.rows=function(){var f=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var D of d)f.push(new r([D],this._datatype));return f},r.prototype.columns=function(){var f=this,l=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var D=this._data,p=function(F){var _=D.map(w=>[w[F]]);l.push(new r(_,f._datatype))},h=0;h<d[1];h++)p(h);return l},r.prototype.toArray=function(){return ve(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return Ae(this._data,f)},r.prototype.toString=function(){return Ae(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(ye(f)&&(f=f.toNumber()),!De(f)||!Ce(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var l=f>0?f:0,d=f<0?-f:0,D=this._size[0],p=this._size[1],h=Math.min(D-d,p-l),m=[],F=0;F<h;F++)m[F]=this._data[F+d][F+l];return new r({data:m,size:[h],datatype:this._datatype})},r.diagonal=function(f,l,d,D){if(!Se(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(C){if(ye(C)&&(C=C.toNumber()),!De(C)||!Ce(C)||C<1)throw new Error("Size values must be positive integers");return C}),d){if(ye(d)&&(d=d.toNumber()),!De(d)||!Ce(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,h=d<0?-d:0,m=f[0],F=f[1],_=Math.min(m-h,F-p),w;if(Se(l)){if(l.length!==_)throw new Error("Invalid value array length");w=function(E){return l[E]}}else if(we(l)){var y=l.size();if(y.length!==1||y[0]!==_)throw new Error("Invalid matrix length");w=function(E){return l.get([E])}}else w=function(){return l};D||(D=ye(w(0))?w(0).mul(0):0);var v=[];if(f.length>0){v=Dr(v,f,D);for(var g=0;g<_;g++)v[g+h][g+p]=w(g)}return new r({data:v,size:[m,F]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,l){if(!De(f)||!Ce(f)||!De(l)||!Ce(l))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Fe(f,this._size[0]),Fe(l,this._size[0]),r._swapRows(f,l,this._data),this},r._swapRows=function(f,l,d){var D=d[f];d[f]=d[l],d[l]=D};function c(f){return we(f)?c(f.valueOf()):Se(f)?f.map(c):f}return r},{isClass:!0});function mt(e,t,r){if(!r)return we(e)?e.map(i=>t(i),!1,!0):Yr(e,t,!0);var n=i=>i===0?i:t(i);return we(e)?e.map(i=>n(i),!1,!0):Yr(e,n,!0)}var ni="isInteger",zo=["typed"],Io=Q(ni,zo,e=>{var{typed:t}=e;return t(ni,{number:Ce,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":t.referToSelf(r=>n=>mt(n,r))})}),ii="number",Kr="number, number";function ui(e){return Math.abs(e)}ui.signature=ii;function ai(e,t){return e+t}ai.signature=Kr;function oi(e,t){return e-t}oi.signature=Kr;function si(e,t){return e*t}si.signature=Kr;function fi(e){return-e}fi.signature=ii;function Ro(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(r),n))}var ci="isZero",$o=["typed","equalScalar"],Po=Q(ci,$o,e=>{var{typed:t,equalScalar:r}=e;return t(ci,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>mt(i,n))})});function qo(e,t,r,n){return rr(e.re,t.re,r,n)&&rr(e.im,t.im,r,n)}var Uo=Q("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),pr="equalScalar",Lo=["typed","config"],Go=Q(pr,Lo,e=>{var{typed:t,config:r}=e,n=Uo({typed:t});return t(pr,{"boolean, boolean":function(u,a){return u===a},"number, number":function(u,a){return rr(u,a,r.relTol,r.absTol)},"BigNumber, BigNumber":function(u,a){return u.eq(a)||Ro(u,a,r.relTol,r.absTol)},"bigint, bigint":function(u,a){return u===a},"Fraction, Fraction":function(u,a){return u.equals(a)},"Complex, Complex":function(u,a){return qo(u,a,r.relTol,r.absTol)}},n)});Q(pr,["typed","config"],e=>{var{typed:t,config:r}=e;return t(pr,{"number, number":function(i,u){return rr(i,u,r.relTol,r.absTol)}})});var Zo="SparseMatrix",Jo=["typed","equalScalar","Matrix"],Vo=Q(Zo,Jo,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function i(h,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!rt(m))throw new Error("Invalid datatype: "+m);if(we(h))u(this,h,m);else if(h&&Se(h.index)&&Se(h.ptr)&&Se(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=m||h.datatype;else if(Se(h))a(this,h,m);else{if(h)throw new TypeError("Unsupported type of data ("+lt(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function u(h,m,F){m.type==="SparseMatrix"?(h._values=m._values?ve(m._values):void 0,h._index=ve(m._index),h._ptr=ve(m._ptr),h._size=ve(m._size),h._datatype=F||m._datatype):a(h,m.valueOf(),F||m._datatype)}function a(h,m,F){h._values=[],h._index=[],h._ptr=[],h._datatype=F;var _=m.length,w=0,y=r,v=0;if(rt(F)&&(y=t.find(r,[F,F])||r,v=t.convert(0,F)),_>0){var g=0;do{h._ptr.push(h._index.length);for(var C=0;C<_;C++){var E=m[C];if(Se(E)){if(g===0&&w<E.length&&(w=E.length),g<E.length){var B=E[g];y(B,v)||(h._values.push(B),h._index.push(C))}}else g===0&&w<1&&(w=1),y(E,v)||(h._values.push(E),h._index.push(C))}g++}while(g<w)}h._ptr.push(h._index.length),h._size=[_,w]}i.prototype=new n,i.prototype.createSparseMatrix=function(h,m){return new i(h,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return kr(this._values,lt)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(h,m){return new i(h,m)},i.prototype.density=function(){var h=this._size[0],m=this._size[1];return h!==0&&m!==0?this._index.length/(h*m):0},i.prototype.subset=function(h,m,F){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,h);case 2:case 3:return o(this,h,m,F);default:throw new SyntaxError("Wrong number of arguments")}};function s(h,m){if(!Mr(m))throw new TypeError("Invalid index");var F=m.isScalar();if(F)return h.get(m.min());var _=m.size();if(_.length!==h._size.length)throw new ne(_.length,h._size.length);var w,y,v,g,C=m.min(),E=m.max();for(w=0,y=h._size.length;w<y;w++)Fe(C[w],h._size[w]),Fe(E[w],h._size[w]);var B=h._values,b=h._index,M=h._ptr,I=m.dimension(0),U=m.dimension(1),O=[],q=[];I.forEach(function(k,ee){q[k]=ee[0],O[k]=!0});var N=B?[]:void 0,W=[],X=[];return U.forEach(function(k){for(X.push(W.length),v=M[k],g=M[k+1];v<g;v++)w=b[v],O[w]===!0&&(W.push(q[w]),N&&N.push(B[v]))}),X.push(W.length),new i({values:N,index:W,ptr:X,size:_,datatype:h._datatype})}function o(h,m,F,_){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),y=m.isScalar(),v;if(we(F)?(v=F.size(),F=F.toArray()):v=Pe(F),y){if(v.length!==0)throw new TypeError("Scalar expected");h.set(m.min(),F,_)}else{if(w.length!==1&&w.length!==2)throw new ne(w.length,h._size.length,"<");if(v.length<w.length){for(var g=0,C=0;w[g]===1&&v[g]===1;)g++;for(;w[g]===1;)C++,g++;F=Kn(F,w.length,C,v)}if(!ht(w,v))throw new ne(w,v,">");if(w.length===1){var E=m.dimension(0);E.forEach(function(M,I){Fe(M),h.set([M,0],F[I[0]],_)})}else{var B=m.dimension(0),b=m.dimension(1);B.forEach(function(M,I){Fe(M),b.forEach(function(U,O){Fe(U),h.set([M,U],F[I[0]][O[0]],_)})})}}return h}i.prototype.get=function(h){if(!Se(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ne(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=h[0],F=h[1];Fe(m,this._size[0]),Fe(F,this._size[1]);var _=c(m,this._ptr[F],this._ptr[F+1],this._index);return _<this._ptr[F+1]&&this._index[_]===m?this._values[_]:0},i.prototype.set=function(h,m,F){if(!Se(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ne(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var _=h[0],w=h[1],y=this._size[0],v=this._size[1],g=r,C=0;rt(this._datatype)&&(g=t.find(r,[this._datatype,this._datatype])||r,C=t.convert(0,this._datatype)),(_>y-1||w>v-1)&&(d(this,Math.max(_+1,y),Math.max(w+1,v),F),y=this._size[0],v=this._size[1]),Fe(_,y),Fe(w,v);var E=c(_,this._ptr[w],this._ptr[w+1],this._index);return E<this._ptr[w+1]&&this._index[E]===_?g(m,C)?f(E,w,this._values,this._index,this._ptr):this._values[E]=m:g(m,C)||l(E,_,w,m,this._values,this._index,this._ptr),this};function c(h,m,F,_){if(F-m===0)return F;for(var w=m;w<F;w++)if(_[w]===h)return w;return m}function f(h,m,F,_,w){F.splice(h,1),_.splice(h,1);for(var y=m+1;y<w.length;y++)w[y]--}function l(h,m,F,_,w,y,v){w.splice(h,0,_),y.splice(h,0,m);for(var g=F+1;g<v.length;g++)v[g]++}i.prototype.resize=function(h,m,F){if(!Qt(h))throw new TypeError("Array or Matrix expected");var _=h.valueOf().map(y=>Array.isArray(y)&&y.length===1?y[0]:y);if(_.length!==2)throw new Error("Only two dimensions matrix are supported");_.forEach(function(y){if(!De(y)||!Ce(y)||y<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ae(_)+")")});var w=F?this.clone():this;return d(w,_[0],_[1],m)};function d(h,m,F,_){var w=_||0,y=r,v=0;rt(h._datatype)&&(y=t.find(r,[h._datatype,h._datatype])||r,v=t.convert(0,h._datatype),w=t.convert(w,h._datatype));var g=!y(w,v),C=h._size[0],E=h._size[1],B,b,M;if(F>E){for(b=E;b<F;b++)if(h._ptr[b]=h._values.length,g)for(B=0;B<C;B++)h._values.push(w),h._index.push(B);h._ptr[F]=h._values.length}else F<E&&(h._ptr.splice(F+1,E-F),h._values.splice(h._ptr[F],h._values.length),h._index.splice(h._ptr[F],h._index.length));if(E=F,m>C){if(g){var I=0;for(b=0;b<E;b++){h._ptr[b]=h._ptr[b]+I,M=h._ptr[b+1]+I;var U=0;for(B=C;B<m;B++,U++)h._values.splice(M+U,0,w),h._index.splice(M+U,0,B),I++}h._ptr[E]=h._values.length}}else if(m<C){var O=0;for(b=0;b<E;b++){h._ptr[b]=h._ptr[b]-O;var q=h._ptr[b],N=h._ptr[b+1]-O;for(M=q;M<N;M++)B=h._index[M],B>m-1&&(h._values.splice(M,1),h._index.splice(M,1),O++)}h._ptr[b]=h._values.length}return h._size[0]=m,h._size[1]=F,h}i.prototype.reshape=function(h,m){if(!Se(h))throw new TypeError("Array expected");if(h.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function(k){if(!De(k)||!Ce(k)||k<=-2||k===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ae(h)+")")});var F=this._size[0]*this._size[1];h=Vr(h,F);var _=h[0]*h[1];if(F!==_)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return w;for(var y=[],v=0;v<w._ptr.length;v++)for(var g=0;g<w._ptr[v+1]-w._ptr[v];g++)y.push(v);for(var C=w._values.slice(),E=w._index.slice(),B=0;B<w._index.length;B++){var b=E[B],M=y[B],I=b*w._size[1]+M;y[B]=I%h[1],E[B]=Math.floor(I/h[1])}w._values.length=0,w._index.length=0,w._ptr.length=h[1]+1,w._size=h.slice();for(var U=0;U<w._ptr.length;U++)w._ptr[U]=0;for(var O=0;O<C.length;O++){var q=E[O],N=y[O],W=C[O],X=c(q,w._ptr[N],w._ptr[N+1],w._index);l(X,q,N,W,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var h=new i({values:this._values?ve(this._values):void 0,index:ve(this._index),ptr:ve(this._ptr),size:ve(this._size),datatype:this._datatype});return h},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(h,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var F=this,_=this._size[0],w=this._size[1],y=Zt(h,F,"map"),v=function(C,E,B){return y.fn(C,[E,B],F)};return D(this,0,_-1,0,w-1,v,m)};function D(h,m,F,_,w,y,v){var g=[],C=[],E=[],B=r,b=0;rt(h._datatype)&&(B=t.find(r,[h._datatype,h._datatype])||r,b=t.convert(0,h._datatype));for(var M=function(oe,xe,_e){var Ee=y(oe,xe,_e);B(Ee,b)||(g.push(Ee),C.push(xe))},I=_;I<=w;I++){E.push(g.length);var U=h._ptr[I],O=h._ptr[I+1];if(v)for(var q=U;q<O;q++){var N=h._index[q];N>=m&&N<=F&&M(h._values[q],N-m,I-_)}else{for(var W={},X=U;X<O;X++){var k=h._index[X];W[k]=h._values[X]}for(var ee=m;ee<=F;ee++){var ae=ee in W?W[ee]:0;M(ae,ee-m,I-_)}}}return E.push(g.length),new i({values:g,index:C,ptr:E,size:[F-m+1,w-_+1]})}i.prototype.forEach=function(h,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var F=this,_=this._size[0],w=this._size[1],y=Zt(h,F,"forEach"),v=0;v<w;v++){var g=this._ptr[v],C=this._ptr[v+1];if(m)for(var E=g;E<C;E++){var B=this._index[E];y.fn(this._values[E],[B,v],F)}else{for(var b={},M=g;M<C;M++){var I=this._index[M];b[I]=this._values[M]}for(var U=0;U<_;U++){var O=U in b?b[U]:0;y.fn(O,[U,v],F)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],m=0;m<h;m++)for(var F=this._ptr[m],_=this._ptr[m+1],w=F;w<_;w++){var y=this._index[w];yield{value:this._values[w],index:[y,m]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(h,m,F,_,w){var y=_[0],v=_[1],g=[],C,E;for(C=0;C<y;C++)for(g[C]=[],E=0;E<v;E++)g[C][E]=0;for(E=0;E<v;E++)for(var B=F[E],b=F[E+1],M=B;M<b;M++)C=m[M],g[C][E]=h?w?ve(h[M]):h[M]:1;return g}return i.prototype.format=function(h){for(var m=this._size[0],F=this._size[1],_=this.density(),w="Sparse Matrix ["+Ae(m,h)+" x "+Ae(F,h)+"] density: "+Ae(_,h)+`
`,y=0;y<F;y++)for(var v=this._ptr[y],g=this._ptr[y+1],C=v;C<g;C++){var E=this._index[C];w+=`
    (`+Ae(E,h)+", "+Ae(y,h)+") ==> "+(this._values?Ae(this._values[C],h):"X")}return w},i.prototype.toString=function(){return Ae(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(h){if(h){if(ye(h)&&(h=h.toNumber()),!De(h)||!Ce(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var m=h>0?h:0,F=h<0?-h:0,_=this._size[0],w=this._size[1],y=Math.min(_-F,w-m),v=[],g=[],C=[];C[0]=0;for(var E=m;E<w&&v.length<y;E++)for(var B=this._ptr[E],b=this._ptr[E+1],M=B;M<b;M++){var I=this._index[M];if(I===E-m+F){v.push(this._values[M]),g[v.length-1]=I-F;break}}return C.push(v.length),new i({values:v,index:g,ptr:C,size:[y,1]})},i.fromJSON=function(h){return new i(h)},i.diagonal=function(h,m,F,_,w){if(!Se(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(k){if(ye(k)&&(k=k.toNumber()),!De(k)||!Ce(k)||k<1)throw new Error("Size values must be positive integers");return k}),F){if(ye(F)&&(F=F.toNumber()),!De(F)||!Ce(F))throw new TypeError("The parameter k must be an integer number")}else F=0;var y=r,v=0;rt(w)&&(y=t.find(r,[w,w])||r,v=t.convert(0,w));var g=F>0?F:0,C=F<0?-F:0,E=h[0],B=h[1],b=Math.min(E-C,B-g),M;if(Se(m)){if(m.length!==b)throw new Error("Invalid value array length");M=function(ee){return m[ee]}}else if(we(m)){var I=m.size();if(I.length!==1||I[0]!==b)throw new Error("Invalid matrix length");M=function(ee){return m.get([ee])}}else M=function(){return m};for(var U=[],O=[],q=[],N=0;N<B;N++){q.push(U.length);var W=N-g;if(W>=0&&W<b){var X=M(W);y(X,v)||(O.push(W+C),U.push(X))}}return q.push(U.length),new i({values:U,index:O,ptr:q,size:[E,B]})},i.prototype.swapRows=function(h,m){if(!De(h)||!Ce(h)||!De(m)||!Ce(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Fe(h,this._size[0]),Fe(m,this._size[0]),i._swapRows(h,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(h,m,F,_,w){for(var y=_[h],v=_[h+1],g=y;g<v;g++)w(F[g],m[g])},i._swapRows=function(h,m,F,_,w,y){for(var v=0;v<F;v++){var g=y[v],C=y[v+1],E=c(h,g,C,w),B=c(m,g,C,w);if(E<C&&B<C&&w[E]===h&&w[B]===m){if(_){var b=_[E];_[E]=_[B],_[B]=b}continue}if(E<C&&w[E]===h&&(B>=C||w[B]!==m)){var M=_?_[E]:void 0;w.splice(B,0,m),_&&_.splice(B,0,M),w.splice(B<=E?E+1:E,1),_&&_.splice(B<=E?E+1:E,1);continue}if(B<C&&w[B]===m&&(E>=C||w[E]!==h)){var I=_?_[B]:void 0;w.splice(E,0,h),_&&_.splice(E,0,I),w.splice(E<=B?B+1:B,1),_&&_.splice(E<=B?B+1:B,1)}}},i},{isClass:!0}),Xo="number",ko=["typed"];function Ho(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],n=t[2],i=t[3];return{input:e,radix:r,integerPart:n,fractionalPart:i}}else return null}function Wo(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n<e.fractionalPart.length;n++){var i=parseInt(e.fractionalPart[n],e.radix);r+=i/Math.pow(e.radix,n+1)}var u=t+r;if(isNaN(u))throw new SyntaxError('String "'+e.input+'" is not a valid number');return u}var Yo=Q(Xo,ko,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var u=Ho(i);if(u)return Wo(u);var a=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(a=Number(s[2]),i=s[1]);var o=Number(i);if(isNaN(o))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(o>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));o>=2**(a-1)&&(o=o-2**a)}return o},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),null:function(i){return 0},"Unit, string | Unit":function(i,u){return i.toNumber(u)},"Array | Matrix":t.referToSelf(n=>i=>mt(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),Ko="bignumber",Qo=["typed","BigNumber"],jo=Q(Ko,Qo,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var u=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var a=u[2],s=r(u[1]),o=new r(2).pow(Number(a));if(s.gt(o.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var c=new r(2).pow(Number(a)-1);return s.gte(c)?s.sub(o):s}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":t.referToSelf(n=>i=>mt(i,n))})}),es="fraction",ts=["typed","Fraction"],rs=Q(es,ts,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,u){return new r(i,u)},"bigint, bigint":function(i,u){return new r(i,u)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Object:function(i){return new r(i)},"Array | Matrix":t.referToSelf(n=>i=>mt(i,n))})}),li="matrix",ns=["typed","Matrix","DenseMatrix","SparseMatrix"],is=Q(li,ns,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(li,{"":function(){return u([])},string:function(s){return u([],s)},"string, string":function(s,o){return u([],s,o)},Array:function(s){return u(s)},Matrix:function(s){return u(s,s.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(a,s,o){if(s==="dense"||s==="default"||s===void 0)return new n(a,o);if(s==="sparse")return new i(a,o);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),hi="unaryMinus",us=["typed"],as=Q(hi,us,e=>{var{typed:t}=e;return t(hi,{number:fi,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:t.referToSelf(r=>n=>{var i=n.clone();return i.value=t.find(r,i.valueType())(n.value),i}),"Array | Matrix":t.referToSelf(r=>n=>mt(n,r,!0))})}),di="abs",os=["typed"],ss=Q(di,os,e=>{var{typed:t}=e;return t(di,{number:ui,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":t.referToSelf(r=>n=>mt(n,r,!0))})}),Di="addScalar",fs=["typed"],cs=Q(Di,fs,e=>{var{typed:t}=e;return t(Di,{"number, number":ai,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),pi="subtractScalar",ls=["typed"],hs=Q(pi,ls,e=>{var{typed:t}=e;return t(pi,{"number, number":oi,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),ds="matAlgo11xS0s",Ds=["typed","equalScalar"],Qr=Q(ds,Ds,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a,s){var o=i._values,c=i._index,f=i._ptr,l=i._size,d=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var D=l[0],p=l[1],h,m=r,F=0,_=a;typeof d=="string"&&(h=d,m=t.find(r,[h,h]),F=t.convert(0,h),u=t.convert(u,h),_=t.find(a,[h,h]));for(var w=[],y=[],v=[],g=0;g<p;g++){v[g]=y.length;for(var C=f[g],E=f[g+1],B=C;B<E;B++){var b=c[B],M=s?_(u,o[B]):_(o[B],u);m(M,F)||(y.push(b),w.push(M))}}return v[p]=y.length,i.createSparseMatrix({values:w,index:y,ptr:v,size:[D,p],datatype:h})}}),ps="matAlgo12xSfs",vs=["typed","DenseMatrix"],gs=Q(ps,vs,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,s){var o=i._values,c=i._index,f=i._ptr,l=i._size,d=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var D=l[0],p=l[1],h,m=a;typeof d=="string"&&(h=d,u=t.convert(u,h),m=t.find(a,[h,h]));for(var F=[],_=[],w=[],y=0;y<p;y++){for(var v=y+1,g=f[y],C=f[y+1],E=g;E<C;E++){var B=c[E];_[B]=o[E],w[B]=v}for(var b=0;b<D;b++)y===0&&(F[b]=[]),w[b]===v?F[b][y]=s?m(u,_[b]):m(_[b],u):F[b][y]=s?m(u,0):m(0,u)}return new r({data:F,size:[D,p],datatype:h})}}),ms="matAlgo14xDs",ws=["typed"],jr=Q(ms,ws,e=>{var{typed:t}=e;return function(i,u,a,s){var o=i._data,c=i._size,f=i._datatype,l,d=a;typeof f=="string"&&(l=f,u=t.convert(u,l),d=t.find(a,[l,l]));var D=c.length>0?r(d,0,c,c[0],o,u,s):[];return i.createDenseMatrix({data:D,size:ve(c),datatype:l})};function r(n,i,u,a,s,o,c){var f=[];if(i===u.length-1)for(var l=0;l<a;l++)f[l]=c?n(o,s[l]):n(s[l],o);else for(var d=0;d<a;d++)f[d]=r(n,i+1,u,u[i+1],s[d],o,c);return f}}),ys="matAlgo02xDS0",As=["typed","equalScalar"],Fs=Q(ys,As,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a,s){var o=i._data,c=i._size,f=i._datatype||i.getDataType(),l=u._values,d=u._index,D=u._ptr,p=u._size,h=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(c.length!==p.length)throw new ne(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=c[0],F=c[1],_,w=r,y=0,v=a;typeof f=="string"&&f===h&&f!=="mixed"&&(_=f,w=t.find(r,[_,_]),y=t.convert(0,_),v=t.find(a,[_,_]));for(var g=[],C=[],E=[],B=0;B<F;B++){E[B]=C.length;for(var b=D[B],M=D[B+1],I=b;I<M;I++){var U=d[I],O=s?v(l[I],o[U][B]):v(o[U][B],l[I]);w(O,y)||(C.push(U),g.push(O))}}return E[F]=C.length,u.createSparseMatrix({values:g,index:C,ptr:E,size:[m,F],datatype:f===i._datatype&&h===u._datatype?_:void 0})}}),Es="matAlgo03xDSf",Cs=["typed"],_s=Q(Es,Cs,e=>{var{typed:t}=e;return function(n,i,u,a){var s=n._data,o=n._size,c=n._datatype||n.getDataType(),f=i._values,l=i._index,d=i._ptr,D=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==D.length)throw new ne(o.length,D.length);if(o[0]!==D[0]||o[1]!==D[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+D+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=o[0],m=o[1],F,_=0,w=u;typeof c=="string"&&c===p&&c!=="mixed"&&(F=c,_=t.convert(0,F),w=t.find(u,[F,F]));for(var y=[],v=0;v<h;v++)y[v]=[];for(var g=[],C=[],E=0;E<m;E++){for(var B=E+1,b=d[E],M=d[E+1],I=b;I<M;I++){var U=l[I];g[U]=a?w(f[I],s[U][E]):w(s[U][E],f[I]),C[U]=B}for(var O=0;O<h;O++)C[O]===B?y[O][E]=g[O]:y[O][E]=a?w(_,s[O][E]):w(s[O][E],_)}return n.createDenseMatrix({data:y,size:[h,m],datatype:c===n._datatype&&p===i._datatype?F:void 0})}}),Bs="matAlgo05xSfSf",xs=["typed","equalScalar"],bs=Q(Bs,xs,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var s=i._values,o=i._index,c=i._ptr,f=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=u._values,D=u._index,p=u._ptr,h=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(f.length!==h.length)throw new ne(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");var F=f[0],_=f[1],w,y=r,v=0,g=a;typeof l=="string"&&l===m&&l!=="mixed"&&(w=l,y=t.find(r,[w,w]),v=t.convert(0,w),g=t.find(a,[w,w]));var C=s&&d?[]:void 0,E=[],B=[],b=C?[]:void 0,M=C?[]:void 0,I=[],U=[],O,q,N,W;for(q=0;q<_;q++){B[q]=E.length;var X=q+1;for(N=c[q],W=c[q+1];N<W;N++)O=o[N],E.push(O),I[O]=X,b&&(b[O]=s[N]);for(N=p[q],W=p[q+1];N<W;N++)O=D[N],I[O]!==X&&E.push(O),U[O]=X,M&&(M[O]=d[N]);if(C)for(N=B[q];N<E.length;){O=E[N];var k=I[O],ee=U[O];if(k===X||ee===X){var ae=k===X?b[O]:v,ue=ee===X?M[O]:v,oe=g(ae,ue);y(oe,v)?E.splice(N,1):(C.push(oe),N++)}}}return B[_]=E.length,i.createSparseMatrix({values:C,index:E,ptr:B,size:[F,_],datatype:l===i._datatype&&m===u._datatype?w:void 0})}}),Ss="matAlgo13xDD",Ms=["typed"],Ns=Q(Ss,Ms,e=>{var{typed:t}=e;return function(i,u,a){var s=i._data,o=i._size,c=i._datatype,f=u._data,l=u._size,d=u._datatype,D=[];if(o.length!==l.length)throw new ne(o.length,l.length);for(var p=0;p<o.length;p++){if(o[p]!==l[p])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");D[p]=o[p]}var h,m=a;typeof c=="string"&&c===d&&(h=c,m=t.find(a,[h,h]));var F=D.length>0?r(m,0,D,D[0],s,f):[];return i.createDenseMatrix({data:F,size:D,datatype:h})};function r(n,i,u,a,s,o){var c=[];if(i===u.length-1)for(var f=0;f<a;f++)c[f]=n(s[f],o[f]);else for(var l=0;l<a;l++)c[l]=r(n,i+1,u,u[i+1],s[l],o[l]);return c}});function Te(e,t){if(ht(e.size(),t.size()))return[e,t];var r=Hr(e.size(),t.size());return[e,t].map(n=>Ts(n,r))}function Ts(e,t){return ht(e.size(),t)?e:e.create(Et(e.valueOf(),t),e.datatype())}var Os="matrixAlgorithmSuite",zs=["typed","matrix"],en=Q(Os,zs,e=>{var{typed:t,matrix:r}=e,n=Ns({typed:t}),i=jr({typed:t});return function(a){var s=a.elop,o=a.SD||a.DS,c;s?(c={"DenseMatrix, DenseMatrix":(D,p)=>n(...Te(D,p),s),"Array, Array":(D,p)=>n(...Te(r(D),r(p)),s).valueOf(),"Array, DenseMatrix":(D,p)=>n(...Te(r(D),p),s),"DenseMatrix, Array":(D,p)=>n(...Te(D,r(p)),s)},a.SS&&(c["SparseMatrix, SparseMatrix"]=(D,p)=>a.SS(...Te(D,p),s,!1)),a.DS&&(c["DenseMatrix, SparseMatrix"]=(D,p)=>a.DS(...Te(D,p),s,!1),c["Array, SparseMatrix"]=(D,p)=>a.DS(...Te(r(D),p),s,!1)),o&&(c["SparseMatrix, DenseMatrix"]=(D,p)=>o(...Te(p,D),s,!0),c["SparseMatrix, Array"]=(D,p)=>o(...Te(r(p),D),s,!0))):(c={"DenseMatrix, DenseMatrix":t.referToSelf(D=>(p,h)=>n(...Te(p,h),D)),"Array, Array":t.referToSelf(D=>(p,h)=>n(...Te(r(p),r(h)),D).valueOf()),"Array, DenseMatrix":t.referToSelf(D=>(p,h)=>n(...Te(r(p),h),D)),"DenseMatrix, Array":t.referToSelf(D=>(p,h)=>n(...Te(p,r(h)),D))},a.SS&&(c["SparseMatrix, SparseMatrix"]=t.referToSelf(D=>(p,h)=>a.SS(...Te(p,h),D,!1))),a.DS&&(c["DenseMatrix, SparseMatrix"]=t.referToSelf(D=>(p,h)=>a.DS(...Te(p,h),D,!1)),c["Array, SparseMatrix"]=t.referToSelf(D=>(p,h)=>a.DS(...Te(r(p),h),D,!1))),o&&(c["SparseMatrix, DenseMatrix"]=t.referToSelf(D=>(p,h)=>o(...Te(h,p),D,!0)),c["SparseMatrix, Array"]=t.referToSelf(D=>(p,h)=>o(...Te(r(h),p),D,!0))));var f=a.scalar||"any",l=a.Ds||a.Ss;l&&(s?(c["DenseMatrix,"+f]=(D,p)=>i(D,p,s,!1),c[f+", DenseMatrix"]=(D,p)=>i(p,D,s,!0),c["Array,"+f]=(D,p)=>i(r(D),p,s,!1).valueOf(),c[f+", Array"]=(D,p)=>i(r(p),D,s,!0).valueOf()):(c["DenseMatrix,"+f]=t.referToSelf(D=>(p,h)=>i(p,h,D,!1)),c[f+", DenseMatrix"]=t.referToSelf(D=>(p,h)=>i(h,p,D,!0)),c["Array,"+f]=t.referToSelf(D=>(p,h)=>i(r(p),h,D,!1).valueOf()),c[f+", Array"]=t.referToSelf(D=>(p,h)=>i(r(h),p,D,!0).valueOf())));var d=a.sS!==void 0?a.sS:a.Ss;return s?(a.Ss&&(c["SparseMatrix,"+f]=(D,p)=>a.Ss(D,p,s,!1)),d&&(c[f+", SparseMatrix"]=(D,p)=>d(p,D,s,!0))):(a.Ss&&(c["SparseMatrix,"+f]=t.referToSelf(D=>(p,h)=>a.Ss(p,h,D,!1))),d&&(c[f+", SparseMatrix"]=t.referToSelf(D=>(p,h)=>d(h,p,D,!0)))),s&&s.signatures&&mn(c,s.signatures),c}}),Is="matAlgo01xDSid",Rs=["typed"],vi=Q(Is,Rs,e=>{var{typed:t}=e;return function(n,i,u,a){var s=n._data,o=n._size,c=n._datatype||n.getDataType(),f=i._values,l=i._index,d=i._ptr,D=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==D.length)throw new ne(o.length,D.length);if(o[0]!==D[0]||o[1]!==D[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+D+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=o[0],m=o[1],F=typeof c=="string"&&c!=="mixed"&&c===p?c:void 0,_=F?t.find(u,[F,F]):u,w,y,v=[];for(w=0;w<h;w++)v[w]=[];var g=[],C=[];for(y=0;y<m;y++){for(var E=y+1,B=d[y],b=d[y+1],M=B;M<b;M++)w=l[M],g[w]=a?_(f[M],s[w][y]):_(s[w][y],f[M]),C[w]=E;for(w=0;w<h;w++)C[w]===E?v[w][y]=g[w]:v[w][y]=s[w][y]}return n.createDenseMatrix({data:v,size:[h,m],datatype:c===n._datatype&&p===i._datatype?F:void 0})}}),$s="matAlgo04xSidSid",Ps=["typed","equalScalar"],qs=Q($s,Ps,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var s=i._values,o=i._index,c=i._ptr,f=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=u._values,D=u._index,p=u._ptr,h=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(f.length!==h.length)throw new ne(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");var F=f[0],_=f[1],w,y=r,v=0,g=a;typeof l=="string"&&l===m&&l!=="mixed"&&(w=l,y=t.find(r,[w,w]),v=t.convert(0,w),g=t.find(a,[w,w]));var C=s&&d?[]:void 0,E=[],B=[],b=s&&d?[]:void 0,M=s&&d?[]:void 0,I=[],U=[],O,q,N,W,X;for(q=0;q<_;q++){B[q]=E.length;var k=q+1;for(W=c[q],X=c[q+1],N=W;N<X;N++)O=o[N],E.push(O),I[O]=k,b&&(b[O]=s[N]);for(W=p[q],X=p[q+1],N=W;N<X;N++)if(O=D[N],I[O]===k){if(b){var ee=g(b[O],d[N]);y(ee,v)?I[O]=null:b[O]=ee}}else E.push(O),U[O]=k,M&&(M[O]=d[N]);if(b&&M)for(N=B[q];N<E.length;)O=E[N],I[O]===k?(C[N]=b[O],N++):U[O]===k?(C[N]=M[O],N++):E.splice(N,1)}return B[_]=E.length,i.createSparseMatrix({values:C,index:E,ptr:B,size:[F,_],datatype:l===i._datatype&&m===u._datatype?w:void 0})}}),Us="matAlgo10xSids",Ls=["typed","DenseMatrix"],gi=Q(Us,Ls,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,s){var o=i._values,c=i._index,f=i._ptr,l=i._size,d=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var D=l[0],p=l[1],h,m=a;typeof d=="string"&&(h=d,u=t.convert(u,h),m=t.find(a,[h,h]));for(var F=[],_=[],w=[],y=0;y<p;y++){for(var v=y+1,g=f[y],C=f[y+1],E=g;E<C;E++){var B=c[E];_[B]=o[E],w[B]=v}for(var b=0;b<D;b++)y===0&&(F[b]=[]),w[b]===v?F[b][y]=s?m(u,_[b]):m(_[b],u):F[b][y]=u}return new r({data:F,size:[D,p],datatype:h})}}),Gs="multiplyScalar",Zs=["typed"],Js=Q(Gs,Zs,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":si,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),mi="multiply",Vs=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Xs=Q(mi,Vs,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:a}=e,s=Qr({typed:t,equalScalar:u}),o=jr({typed:t});function c(v,g){switch(v.length){case 1:switch(g.length){case 1:if(v[0]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(v[0]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+v[0]+") must match Matrix rows ("+g[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+g.length+" dimensions)")}break;case 2:switch(g.length){case 1:if(v[1]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+v[1]+") must match Vector length ("+g[0]+")");break;case 2:if(v[1]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+v[1]+") must match Matrix B rows ("+g[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+g.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+v.length+" dimensions)")}}function f(v,g,C){if(C===0)throw new Error("Cannot multiply two empty vectors");return a(v,g)}function l(v,g){if(g.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(v,g)}function d(v,g){var C=v._data,E=v._size,B=v._datatype||v.getDataType(),b=g._data,M=g._size,I=g._datatype||g.getDataType(),U=E[0],O=M[1],q,N=n,W=i;B&&I&&B===I&&typeof B=="string"&&B!=="mixed"&&(q=B,N=t.find(n,[q,q]),W=t.find(i,[q,q]));for(var X=[],k=0;k<O;k++){for(var ee=W(C[0],b[0][k]),ae=1;ae<U;ae++)ee=N(ee,W(C[ae],b[ae][k]));X[k]=ee}return v.createDenseMatrix({data:X,size:[O],datatype:B===v._datatype&&I===g._datatype?q:void 0})}var D=t("_multiplyMatrixVector",{"DenseMatrix, any":h,"SparseMatrix, any":_}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":F,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":y});function h(v,g){var C=v._data,E=v._size,B=v._datatype||v.getDataType(),b=g._data,M=g._datatype||g.getDataType(),I=E[0],U=E[1],O,q=n,N=i;B&&M&&B===M&&typeof B=="string"&&B!=="mixed"&&(O=B,q=t.find(n,[O,O]),N=t.find(i,[O,O]));for(var W=[],X=0;X<I;X++){for(var k=C[X],ee=N(k[0],b[0]),ae=1;ae<U;ae++)ee=q(ee,N(k[ae],b[ae]));W[X]=ee}return v.createDenseMatrix({data:W,size:[I],datatype:B===v._datatype&&M===g._datatype?O:void 0})}function m(v,g){var C=v._data,E=v._size,B=v._datatype||v.getDataType(),b=g._data,M=g._size,I=g._datatype||g.getDataType(),U=E[0],O=E[1],q=M[1],N,W=n,X=i;B&&I&&B===I&&typeof B=="string"&&B!=="mixed"&&B!=="mixed"&&(N=B,W=t.find(n,[N,N]),X=t.find(i,[N,N]));for(var k=[],ee=0;ee<U;ee++){var ae=C[ee];k[ee]=[];for(var ue=0;ue<q;ue++){for(var oe=X(ae[0],b[0][ue]),xe=1;xe<O;xe++)oe=W(oe,X(ae[xe],b[xe][ue]));k[ee][ue]=oe}}return v.createDenseMatrix({data:k,size:[U,q],datatype:B===v._datatype&&I===g._datatype?N:void 0})}function F(v,g){var C=v._data,E=v._size,B=v._datatype||v.getDataType(),b=g._values,M=g._index,I=g._ptr,U=g._size,O=g._datatype||g._data===void 0?g._datatype:g.getDataType();if(!b)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var q=E[0],N=U[1],W,X=n,k=i,ee=u,ae=0;B&&O&&B===O&&typeof B=="string"&&B!=="mixed"&&(W=B,X=t.find(n,[W,W]),k=t.find(i,[W,W]),ee=t.find(u,[W,W]),ae=t.convert(0,W));for(var ue=[],oe=[],xe=[],_e=g.createSparseMatrix({values:ue,index:oe,ptr:xe,size:[q,N],datatype:B===v._datatype&&O===g._datatype?W:void 0}),Ee=0;Ee<N;Ee++){xe[Ee]=oe.length;var ge=I[Ee],qe=I[Ee+1];if(qe>ge)for(var he=0,fe=0;fe<q;fe++){for(var He=fe+1,Ie=void 0,de=ge;de<qe;de++){var Oe=M[de];he!==He?(Ie=k(C[fe][Oe],b[de]),he=He):Ie=X(Ie,k(C[fe][Oe],b[de]))}he===He&&!ee(Ie,ae)&&(oe.push(fe),ue.push(Ie))}}return xe[N]=oe.length,_e}function _(v,g){var C=v._values,E=v._index,B=v._ptr,b=v._datatype||v._data===void 0?v._datatype:v.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=g._data,I=g._datatype||g.getDataType(),U=v._size[0],O=g._size[0],q=[],N=[],W=[],X,k=n,ee=i,ae=u,ue=0;b&&I&&b===I&&typeof b=="string"&&b!=="mixed"&&(X=b,k=t.find(n,[X,X]),ee=t.find(i,[X,X]),ae=t.find(u,[X,X]),ue=t.convert(0,X));var oe=[],xe=[];W[0]=0;for(var _e=0;_e<O;_e++){var Ee=M[_e];if(!ae(Ee,ue))for(var ge=B[_e],qe=B[_e+1],he=ge;he<qe;he++){var fe=E[he];xe[fe]?oe[fe]=k(oe[fe],ee(Ee,C[he])):(xe[fe]=!0,N.push(fe),oe[fe]=ee(Ee,C[he]))}}for(var He=N.length,Ie=0;Ie<He;Ie++){var de=N[Ie];q[Ie]=oe[de]}return W[1]=N.length,v.createSparseMatrix({values:q,index:N,ptr:W,size:[U,1],datatype:b===v._datatype&&I===g._datatype?X:void 0})}function w(v,g){var C=v._values,E=v._index,B=v._ptr,b=v._datatype||v._data===void 0?v._datatype:v.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=g._data,I=g._datatype||g.getDataType(),U=v._size[0],O=g._size[0],q=g._size[1],N,W=n,X=i,k=u,ee=0;b&&I&&b===I&&typeof b=="string"&&b!=="mixed"&&(N=b,W=t.find(n,[N,N]),X=t.find(i,[N,N]),k=t.find(u,[N,N]),ee=t.convert(0,N));for(var ae=[],ue=[],oe=[],xe=v.createSparseMatrix({values:ae,index:ue,ptr:oe,size:[U,q],datatype:b===v._datatype&&I===g._datatype?N:void 0}),_e=[],Ee=[],ge=0;ge<q;ge++){oe[ge]=ue.length;for(var qe=ge+1,he=0;he<O;he++){var fe=M[he][ge];if(!k(fe,ee))for(var He=B[he],Ie=B[he+1],de=He;de<Ie;de++){var Oe=E[de];Ee[Oe]!==qe?(Ee[Oe]=qe,ue.push(Oe),_e[Oe]=X(fe,C[de])):_e[Oe]=W(_e[Oe],X(fe,C[de]))}}for(var We=oe[ge],ft=ue.length,ct=We;ct<ft;ct++){var $t=ue[ct];ae[ct]=_e[$t]}}return oe[q]=ue.length,xe}function y(v,g){var C=v._values,E=v._index,B=v._ptr,b=v._datatype||v._data===void 0?v._datatype:v.getDataType(),M=g._values,I=g._index,U=g._ptr,O=g._datatype||g._data===void 0?g._datatype:g.getDataType(),q=v._size[0],N=g._size[1],W=C&&M,X,k=n,ee=i;b&&O&&b===O&&typeof b=="string"&&b!=="mixed"&&(X=b,k=t.find(n,[X,X]),ee=t.find(i,[X,X]));for(var ae=W?[]:void 0,ue=[],oe=[],xe=v.createSparseMatrix({values:ae,index:ue,ptr:oe,size:[q,N],datatype:b===v._datatype&&O===g._datatype?X:void 0}),_e=W?[]:void 0,Ee=[],ge,qe,he,fe,He,Ie,de,Oe,We=0;We<N;We++){oe[We]=ue.length;var ft=We+1;for(He=U[We],Ie=U[We+1],fe=He;fe<Ie;fe++)if(Oe=I[fe],W)for(qe=B[Oe],he=B[Oe+1],ge=qe;ge<he;ge++)de=E[ge],Ee[de]!==ft?(Ee[de]=ft,ue.push(de),_e[de]=ee(M[fe],C[ge])):_e[de]=k(_e[de],ee(M[fe],C[ge]));else for(qe=B[Oe],he=B[Oe+1],ge=qe;ge<he;ge++)de=E[ge],Ee[de]!==ft&&(Ee[de]=ft,ue.push(de));if(W)for(var ct=oe[We],$t=ue.length,Pt=ct;Pt<$t;Pt++){var Dn=ue[Pt];ae[Pt]=_e[Dn]}}return oe[N]=ue.length,xe}return t(mi,i,{"Array, Array":t.referTo("Matrix, Matrix",v=>(g,C)=>{c(Pe(g),Pe(C));var E=v(r(g),r(C));return we(E)?E.valueOf():E}),"Matrix, Matrix":function(g,C){var E=g.size(),B=C.size();return c(E,B),E.length===1?B.length===1?f(g,C,E[0]):l(g,C):B.length===1?D(g,C):p(g,C)},"Matrix, Array":t.referTo("Matrix,Matrix",v=>(g,C)=>v(g,r(C))),"Array, Matrix":t.referToSelf(v=>(g,C)=>v(r(g,C.storage()),C)),"SparseMatrix, any":function(g,C){return s(g,C,i,!1)},"DenseMatrix, any":function(g,C){return o(g,C,i,!1)},"any, SparseMatrix":function(g,C){return s(C,g,i,!0)},"any, DenseMatrix":function(g,C){return o(C,g,i,!0)},"Array, any":function(g,C){return o(r(g),C,i,!1).valueOf()},"any, Array":function(g,C){return o(r(C),g,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(v=>(g,C,E)=>{for(var B=v(g,C),b=0;b<E.length;b++)B=v(B,E[b]);return B})})}),wi="subtract",ks=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Hs=Q(wi,ks,e=>{var{typed:t,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:u,DenseMatrix:a,concat:s}=e,o=vi({typed:t}),c=_s({typed:t}),f=bs({typed:t,equalScalar:n}),l=gi({typed:t,DenseMatrix:a}),d=gs({typed:t,DenseMatrix:a}),D=en({typed:t,matrix:r,concat:s});return t(wi,{"any, any":i},D({elop:i,SS:f,DS:o,SD:c,Ss:d,sS:l}))}),Ws="matAlgo09xS0Sf",Ys=["typed","equalScalar"],Ks=Q(Ws,Ys,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var s=i._values,o=i._index,c=i._ptr,f=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=u._values,D=u._index,p=u._ptr,h=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(f.length!==h.length)throw new ne(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");var F=f[0],_=f[1],w,y=r,v=0,g=a;typeof l=="string"&&l===m&&l!=="mixed"&&(w=l,y=t.find(r,[w,w]),v=t.convert(0,w),g=t.find(a,[w,w]));var C=s&&d?[]:void 0,E=[],B=[],b=C?[]:void 0,M=[],I,U,O,q,N;for(U=0;U<_;U++){B[U]=E.length;var W=U+1;if(b)for(q=p[U],N=p[U+1],O=q;O<N;O++)I=D[O],M[I]=W,b[I]=d[O];for(q=c[U],N=c[U+1],O=q;O<N;O++)if(I=o[O],b){var X=M[I]===W?b[I]:v,k=g(s[O],X);y(k,v)||(E.push(I),C.push(k))}else E.push(I)}return B[_]=E.length,i.createSparseMatrix({values:C,index:E,ptr:B,size:[F,_],datatype:l===i._datatype&&m===u._datatype?w:void 0})}}),yi="dotMultiply",Qs=["typed","matrix","equalScalar","multiplyScalar","concat"],js=Q(yi,Qs,e=>{var{typed:t,matrix:r,equalScalar:n,multiplyScalar:i,concat:u}=e,a=Fs({typed:t,equalScalar:n}),s=Ks({typed:t,equalScalar:n}),o=Qr({typed:t,equalScalar:n}),c=en({typed:t,matrix:r,concat:u});return t(yi,c({elop:i,SS:s,DS:a,Ss:o}))}),Ai="conj",ef=["typed"],tf=Q(Ai,ef,e=>{var{typed:t}=e;return t(Ai,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:t.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":t.referToSelf(r=>n=>mt(n,r))})}),Fi="concat",rf=["typed","matrix","isInteger"],nf=Q(Fi,rf,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(Fi,{"...Array | Matrix | number | BigNumber":function(u){var a,s=u.length,o=-1,c,f=!1,l=[];for(a=0;a<s;a++){var d=u[a];if(we(d)&&(f=!0),De(d)||ye(d)){if(a!==s-1)throw new Error("Dimension must be specified as last argument");if(c=o,o=d.valueOf(),!n(o))throw new TypeError("Integer number expected for dimension");if(o<0||a>0&&o>c)throw new Ft(o,c+1)}else{var D=ve(d).valueOf(),p=Pe(D);if(l[a]=D,c=o,o=p.length-1,a>0&&o!==c)throw new ne(c+1,o+1)}}if(l.length===0)throw new SyntaxError("At least one matrix expected");for(var h=l.shift();l.length;)h=ei(h,l.shift(),o);return f?r(h):h},"...string":function(u){return u.join("")}})}),Ei="flatten",uf=["typed"],af=Q(Ei,uf,e=>{var{typed:t}=e;return t(Ei,{Array:function(n){return Xr(n)},Matrix:function(n){return n.create(Xr(n.valueOf(),!0),n.datatype())}})}),Ci="identity",of=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],sf=Q(Ci,of,e=>{var{typed:t,config:r,matrix:n,BigNumber:i,DenseMatrix:u,SparseMatrix:a}=e;return t(Ci,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(f){return n(f)},"number | BigNumber":function(f){return o(f,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(f,l){return o(f,f,l)},"number | BigNumber, number | BigNumber":function(f,l){return o(f,l,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(f,l,d){return o(f,l,d)},Array:function(f){return s(f)},"Array, string":function(f,l){return s(f,l)},Matrix:function(f){return s(f.valueOf(),f.storage())},"Matrix, string":function(f,l){return s(f.valueOf(),l)}});function s(c,f){switch(c.length){case 0:return f?n(f):[];case 1:return o(c[0],c[0],f);case 2:return o(c[0],c[1],f);default:throw new Error("Vector containing two values expected")}}function o(c,f,l){var d=ye(c)||ye(f)?i:null;if(ye(c)&&(c=c.toNumber()),ye(f)&&(f=f.toNumber()),!Ce(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!Ce(f)||f<1)throw new Error("Parameters in function identity must be positive integers");var D=d?new i(1):1,p=d?new d(0):0,h=[c,f];if(l){if(l==="sparse")return a.diagonal(h,D,0,p);if(l==="dense")return u.diagonal(h,D,0,p);throw new TypeError('Unknown matrix type "'.concat(l,'"'))}for(var m=Dr([],h,p),F=c<f?c:f,_=0;_<F;_++)m[_][_]=D;return m}}),tn="map",ff=["typed"],cf=Q(tn,ff,e=>{var{typed:t}=e;return t(tn,{"Array, function":n,"Matrix, function":function(u,a){return u.map(a)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(i,u,a)=>r([i,u,...a.slice(0,a.length-1)],a[a.length-1])});function r(i,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var a=i[0].isMatrix,s=Hr(...i.map(y=>y.isMatrix?y.size():Pe(y))),o=a?(y,v)=>y.get(v):Wr,c=a?i.map(y=>y.isMatrix?y.create(Et(y.toArray(),s),y.datatype()):i[0].create(Et(y.valueOf(),s))):i.map(y=>y.isMatrix?Et(y.toArray(),s):Et(y,s)),f;if(t.isTypedFunction(u)){var l=s.map(()=>0),d=c.map(y=>o(y,l)),D=w(u,d,l,c);f=F(D)}else{var p=i.length,h=_(u,p);f=F(h)}var m=(y,v)=>f([y,...c.slice(1).map(g=>o(g,v))],v);if(a)return c[0].map(m);return n(c[0],m);function F(y){switch(y){case 0:return v=>u(...v);case 1:return(v,g)=>u(...v,g);case 2:return(v,g)=>u(...v,g,...c)}}function _(y,v){return y.length>v+1?2:y.length===v+1?1:0}function w(y,v,g,C){return t.resolve(y,[...v,g,...C])!==null?2:t.resolve(y,[...v,g])!==null?1:(t.resolve(y,v)!==null,0)}}function n(i,u){var a=Zt(u,i,tn);return Yr(i,a.fn,a.isUnary)}});function lf(){throw new Error('No "bignumber" implementation available')}function hf(){throw new Error('No "fraction" implementation available')}function df(){throw new Error('No "matrix" implementation available')}var _i="size",Df=["typed","config","?matrix"],pf=Q(_i,Df,e=>{var{typed:t,config:r,matrix:n}=e;return t(_i,{Matrix:function(u){return u.create(u.size(),"number")},Array:Pe,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([],"dense","number"):df()}})}),Bi="transpose",vf=["typed","matrix"],gf=Q(Bi,vf,e=>{var{typed:t,matrix:r}=e;return t(Bi,{Array:a=>n(r(a)).valueOf(),Matrix:n,any:ve});function n(a){var s=a.size(),o;switch(s.length){case 1:o=a.clone();break;case 2:{var c=s[0],f=s[1];if(f===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Ae(s)+")");switch(a.storage()){case"dense":o=i(a,c,f);break;case"sparse":o=u(a,c,f);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Ae(s)+")")}return o}function i(a,s,o){for(var c=a._data,f=[],l,d=0;d<o;d++){l=f[d]=[];for(var D=0;D<s;D++)l[D]=ve(c[D][d])}return a.createDenseMatrix({data:f,size:[o,s],datatype:a._datatype})}function u(a,s,o){for(var c=a._values,f=a._index,l=a._ptr,d=c?[]:void 0,D=[],p=[],h=[],m=0;m<s;m++)h[m]=0;var F,_,w;for(F=0,_=f.length;F<_;F++)h[f[F]]++;for(var y=0,v=0;v<s;v++)p.push(y),y+=h[v],h[v]=p[v];for(p.push(y),w=0;w<o;w++)for(var g=l[w],C=l[w+1],E=g;E<C;E++){var B=h[f[E]]++;D[B]=w,c&&(d[B]=ve(c[E]))}return a.createSparseMatrix({values:d,index:D,ptr:p,size:[o,s],datatype:a._datatype})}}),xi="zeros",mf=["typed","config","matrix","BigNumber"],wf=Q(xi,mf,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(xi,{"":function(){return r.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var f=c[c.length-1];if(typeof f=="string"){var l=c.pop();return u(c,l)}else return r.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var f=c.storage();return u(c.valueOf(),f)},"Array | Matrix, string":function(c,f){return u(c.valueOf(),f)}});function u(o,c){var f=a(o),l=f?new i(0):0;if(s(o),c){var d=n(c);return o.length>0?d.resize(o,l):d}else{var D=[];return o.length>0?Dr(D,o,l):D}}function a(o){var c=!1;return o.forEach(function(f,l,d){ye(f)&&(c=!0,d[l]=f.toNumber())}),c}function s(o){o.forEach(function(c){if(typeof c!="number"||!Ce(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),yf="numeric",Af=["number","?bignumber","?fraction"],Ff=Q(yf,Af,e=>{var{number:t,bignumber:r,fraction:n}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:a=>t(a),BigNumber:r?a=>r(a):lf,bigint:a=>BigInt(a),Fraction:n?a=>n(a):hf};return function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var f=lt(s);if(!(f in i))throw new TypeError("Cannot convert "+s+' of type "'+f+'"; valid input types are '+Object.keys(i).join(", "));if(!(o in u))throw new TypeError("Cannot convert "+s+' to type "'+o+'"; valid output types are '+Object.keys(u).join(", "));return o===f?s:u[o](s)}}),bi="divideScalar",Ef=["typed","numeric"],Cf=Q(bi,Ef,e=>{var{typed:t,numeric:r}=e;return t(bi,{"number, number":function(i,u){return i/u},"Complex, Complex":function(i,u){return i.div(u)},"BigNumber, BigNumber":function(i,u){return i.div(u)},"bigint, bigint":function(i,u){return i/u},"Fraction, Fraction":function(i,u){return i.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});function _f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bf(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Si="add",xf=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],bf=Q(Si,xf,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:a,concat:s}=e,o=vi({typed:t}),c=qs({typed:t,equalScalar:i}),f=gi({typed:t,DenseMatrix:u}),l=en({typed:t,matrix:r,concat:s});return t(Si,{"any, any":n,"any, any, ...any":t.referToSelf(d=>(D,p,h)=>{for(var m=d(D,p),F=0;F<h.length;F++)m=d(m,h[F]);return m})},l({elop:n,DS:o,SS:c,Ss:f}))}),Mi="dot",Sf=["typed","addScalar","multiplyScalar","conj","size"],Mf=Q(Mi,Sf,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:i,size:u}=e;return t(Mi,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":o});function a(f,l){var d=c(f),D=c(l),p,h;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(D.length===1)h=D[0];else if(D.length===2&&D[1]===1)h=D[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+D.join(", ")+")");if(p!==h)throw new RangeError("Vectors must have equal length ("+p+" != "+h+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(f,l){var d=a(f,l),D=we(f)?f._data:f,p=we(f)?f._datatype||f.getDataType():void 0,h=we(l)?l._data:l,m=we(l)?l._datatype||l.getDataType():void 0,F=c(f).length===2,_=c(l).length===2,w=r,y=n;if(p&&m&&p===m&&typeof p=="string"&&p!=="mixed"){var v=p;w=t.find(r,[v,v]),y=t.find(n,[v,v])}if(!F&&!_){for(var g=y(i(D[0]),h[0]),C=1;C<d;C++)g=w(g,y(i(D[C]),h[C]));return g}if(!F&&_){for(var E=y(i(D[0]),h[0][0]),B=1;B<d;B++)E=w(E,y(i(D[B]),h[B][0]));return E}if(F&&!_){for(var b=y(i(D[0][0]),h[0]),M=1;M<d;M++)b=w(b,y(i(D[M][0]),h[M]));return b}if(F&&_){for(var I=y(i(D[0][0]),h[0][0]),U=1;U<d;U++)I=w(I,y(i(D[U][0]),h[U][0]));return I}}function o(f,l){a(f,l);for(var d=f._index,D=f._values,p=l._index,h=l._values,m=0,F=r,_=n,w=0,y=0;w<d.length&&y<p.length;){var v=d[w],g=p[y];if(v<g){w++;continue}if(v>g){y++;continue}v===g&&(m=F(m,_(D[w],h[y])),w++,y++)}return m}function c(f){return we(f)?f.size():u(f)}}),Ni="det",Nf=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Tf=Q(Ni,Nf,e=>{var{typed:t,matrix:r,subtractScalar:n,multiply:i,divideScalar:u,isZero:a,unaryMinus:s}=e;return t(Ni,{any:function(f){return ve(f)},"Array | Matrix":function(f){var l;switch(we(f)?l=f.size():Array.isArray(f)?(f=r(f),l=f.size()):l=[],l.length){case 0:return ve(f);case 1:if(l[0]===1)return ve(f.valueOf()[0]);if(l[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ae(l)+")");case 2:{var d=l[0],D=l[1];if(d===D)return o(f.clone().valueOf(),d);if(D===0)return 1;throw new RangeError("Matrix must be square (size: "+Ae(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ae(l)+")")}}});function o(c,f,l){if(f===1)return ve(c[0][0]);if(f===2)return n(i(c[0][0],c[1][1]),i(c[1][0],c[0][1]));for(var d=!1,D=new Array(f).fill(0).map((C,E)=>E),p=0;p<f;p++){var h=D[p];if(a(c[h][p])){var m=void 0;for(m=p+1;m<f;m++)if(!a(c[D[m]][p])){h=D[m],D[m]=D[p],D[p]=h,d=!d;break}if(m===f)return c[h][p]}for(var F=c[h][p],_=p===0?1:c[D[p-1]][p-1],w=p+1;w<f;w++)for(var y=D[w],v=p+1;v<f;v++)c[y][v]=u(n(i(c[y][v],F),i(c[y][p],c[h][v])),_)}var g=c[D[f-1]][f-1];return d?s(g):g}}),Ti="inv",Of=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],zf=Q(Ti,Of,e=>{var{typed:t,matrix:r,divideScalar:n,addScalar:i,multiply:u,unaryMinus:a,det:s,identity:o,abs:c}=e;return t(Ti,{"Array | Matrix":function(d){var D=we(d)?d.size():Pe(d);switch(D.length){case 1:if(D[0]===1)return we(d)?r([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+Ae(D)+")");case 2:{var p=D[0],h=D[1];if(p===h)return we(d)?r(f(d.valueOf(),p,h),d.storage()):f(d,p,h);throw new RangeError("Matrix must be square (size: "+Ae(D)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ae(D)+")")}},any:function(d){return n(1,d)}});function f(l,d,D){var p,h,m,F,_;if(d===1){if(F=l[0][0],F===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,F)]]}else if(d===2){var w=s(l);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(l[1][1],w),n(a(l[0][1]),w)],[n(a(l[1][0]),w),n(l[0][0],w)]]}else{var y=l.concat();for(p=0;p<d;p++)y[p]=y[p].concat();for(var v=o(d).valueOf(),g=0;g<D;g++){var C=c(y[g][g]),E=g;for(p=g+1;p<d;)c(y[p][g])>C&&(C=c(y[p][g]),E=p),p++;if(C===0)throw Error("Cannot calculate inverse, determinant is zero");p=E,p!==g&&(_=y[g],y[g]=y[p],y[p]=_,_=v[g],v[g]=v[p],v[p]=_);var B=y[g],b=v[g];for(p=0;p<d;p++){var M=y[p],I=v[p];if(p!==g){if(M[g]!==0){for(m=n(a(M[g]),B[g]),h=g;h<D;h++)M[h]=i(M[h],u(m,B[h]));for(h=0;h<D;h++)I[h]=i(I[h],u(m,b[h]))}}else{for(m=B[g],h=g;h<D;h++)M[h]=n(M[h],m);for(h=0;h<D;h++)I[h]=n(I[h],m)}}}return v}}}),If="divide",Rf=["typed","matrix","multiply","equalScalar","divideScalar","inv"],$f=Q(If,Rf,e=>{var{typed:t,matrix:r,multiply:n,equalScalar:i,divideScalar:u,inv:a}=e,s=Qr({typed:t,equalScalar:i}),o=jr({typed:t});return t("divide",mn({"Array | Matrix, Array | Matrix":function(f,l){return n(f,a(l))},"DenseMatrix, any":function(f,l){return o(f,l,u,!1)},"SparseMatrix, any":function(f,l){return s(f,l,u,!1)},"Array, any":function(f,l){return o(r(f),l,u,!1).valueOf()},"any, Array | Matrix":function(f,l){return n(f,a(l))}},u.signatures))}),vr={exports:{}},Pf=vr.exports,Oi;function qf(){return Oi||(Oi=1,function(e){(function(t,r,n){function i(o){var c=this,f=s();c.next=function(){var l=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=l-(c.c=l|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(o),c.s0<0&&(c.s0+=1),c.s1-=f(o),c.s1<0&&(c.s1+=1),c.s2-=f(o),c.s2<0&&(c.s2+=1),f=null}function u(o,c){return c.c=o.c,c.s0=o.s0,c.s1=o.s1,c.s2=o.s2,c}function a(o,c){var f=new i(o),l=c&&c.state,d=f.next;return d.int32=function(){return f.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,l&&(typeof l=="object"&&u(l,f),d.state=function(){return u(f,{})}),d}function s(){var o=4022871197,c=function(f){f=String(f);for(var l=0;l<f.length;l++){o+=f.charCodeAt(l);var d=.02519603282416938*o;o=d>>>0,d-=o,d*=o,o=d>>>0,d-=o,o+=d*4294967296}return(o>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=a:this.alea=a})(Pf,e)}(vr)),vr.exports}var gr={exports:{}},Uf=gr.exports,zi;function Lf(){return zi||(zi=1,function(e){(function(t,r,n){function i(s){var o=this,c="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var l=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^l^l>>>8},s===(s|0)?o.x=s:c+=s;for(var f=0;f<c.length+64;f++)o.x^=c.charCodeAt(f)|0,o.next()}function u(s,o){return o.x=s.x,o.y=s.y,o.z=s.z,o.w=s.w,o}function a(s,o){var c=new i(s),f=o&&o.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var d=c.next()>>>11,D=(c.next()>>>0)/4294967296,p=(d+D)/(1<<21);while(p===0);return p},l.int32=c.next,l.quick=l,f&&(typeof f=="object"&&u(f,c),l.state=function(){return u(c,{})}),l}r&&r.exports?r.exports=a:this.xor128=a})(Uf,e)}(gr)),gr.exports}var mr={exports:{}},Gf=mr.exports,Ii;function Zf(){return Ii||(Ii=1,function(e){(function(t,r,n){function i(s){var o=this,c="";o.next=function(){var l=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(l^l<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,s===(s|0)?o.x=s:c+=s;for(var f=0;f<c.length+64;f++)o.x^=c.charCodeAt(f)|0,f==c.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function u(s,o){return o.x=s.x,o.y=s.y,o.z=s.z,o.w=s.w,o.v=s.v,o.d=s.d,o}function a(s,o){var c=new i(s),f=o&&o.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var d=c.next()>>>11,D=(c.next()>>>0)/4294967296,p=(d+D)/(1<<21);while(p===0);return p},l.int32=c.next,l.quick=l,f&&(typeof f=="object"&&u(f,c),l.state=function(){return u(c,{})}),l}r&&r.exports?r.exports=a:this.xorwow=a})(Gf,e)}(mr)),mr.exports}var wr={exports:{}},Jf=wr.exports,Ri;function Vf(){return Ri||(Ri=1,function(e){(function(t,r,n){function i(s){var o=this;o.next=function(){var f=o.x,l=o.i,d,D;return d=f[l],d^=d>>>7,D=d^d<<24,d=f[l+1&7],D^=d^d>>>10,d=f[l+3&7],D^=d^d>>>3,d=f[l+4&7],D^=d^d<<7,d=f[l+7&7],d=d^d<<13,D^=d^d<<9,f[l]=D,o.i=l+1&7,D};function c(f,l){var d,D=[];if(l===(l|0))D[0]=l;else for(l=""+l,d=0;d<l.length;++d)D[d&7]=D[d&7]<<15^l.charCodeAt(d)+D[d+1&7]<<13;for(;D.length<8;)D.push(0);for(d=0;d<8&&D[d]===0;++d);for(d==8?D[7]=-1:D[d],f.x=D,f.i=0,d=256;d>0;--d)f.next()}c(o,s)}function u(s,o){return o.x=s.x.slice(),o.i=s.i,o}function a(s,o){s==null&&(s=+new Date);var c=new i(s),f=o&&o.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var d=c.next()>>>11,D=(c.next()>>>0)/4294967296,p=(d+D)/(1<<21);while(p===0);return p},l.int32=c.next,l.quick=l,f&&(f.x&&u(f,c),l.state=function(){return u(c,{})}),l}r&&r.exports?r.exports=a:this.xorshift7=a})(Jf,e)}(wr)),wr.exports}var yr={exports:{}},Xf=yr.exports,$i;function kf(){return $i||($i=1,function(e){(function(t,r,n){function i(s){var o=this;o.next=function(){var f=o.w,l=o.X,d=o.i,D,p;return o.w=f=f+1640531527|0,p=l[d+34&127],D=l[d=d+1&127],p^=p<<13,D^=D<<17,p^=p>>>15,D^=D>>>12,p=l[d]=p^D,o.i=d,p+(f^f>>>16)|0};function c(f,l){var d,D,p,h,m,F=[],_=128;for(l===(l|0)?(D=l,l=null):(l=l+"\0",D=0,_=Math.max(_,l.length)),p=0,h=-32;h<_;++h)l&&(D^=l.charCodeAt((h+32)%l.length)),h===0&&(m=D),D^=D<<10,D^=D>>>15,D^=D<<4,D^=D>>>13,h>=0&&(m=m+1640531527|0,d=F[h&127]^=D+m,p=d==0?p+1:0);for(p>=128&&(F[(l&&l.length||0)&127]=-1),p=127,h=4*128;h>0;--h)D=F[p+34&127],d=F[p=p+1&127],D^=D<<13,d^=d<<17,D^=D>>>15,d^=d>>>12,F[p]=D^d;f.w=m,f.X=F,f.i=p}c(o,s)}function u(s,o){return o.i=s.i,o.w=s.w,o.X=s.X.slice(),o}function a(s,o){s==null&&(s=+new Date);var c=new i(s),f=o&&o.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var d=c.next()>>>11,D=(c.next()>>>0)/4294967296,p=(d+D)/(1<<21);while(p===0);return p},l.int32=c.next,l.quick=l,f&&(f.X&&u(f,c),l.state=function(){return u(c,{})}),l}r&&r.exports?r.exports=a:this.xor4096=a})(Xf,e)}(yr)),yr.exports}var Ar={exports:{}},Hf=Ar.exports,Pi;function Wf(){return Pi||(Pi=1,function(e){(function(t,r,n){function i(s){var o=this,c="";o.next=function(){var l=o.b,d=o.c,D=o.d,p=o.a;return l=l<<25^l>>>7^d,d=d-D|0,D=D<<24^D>>>8^p,p=p-l|0,o.b=l=l<<20^l>>>12^d,o.c=d=d-D|0,o.d=D<<16^d>>>16^p,o.a=p-l|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,s===Math.floor(s)?(o.a=s/4294967296|0,o.b=s|0):c+=s;for(var f=0;f<c.length+20;f++)o.b^=c.charCodeAt(f)|0,o.next()}function u(s,o){return o.a=s.a,o.b=s.b,o.c=s.c,o.d=s.d,o}function a(s,o){var c=new i(s),f=o&&o.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var d=c.next()>>>11,D=(c.next()>>>0)/4294967296,p=(d+D)/(1<<21);while(p===0);return p},l.int32=c.next,l.quick=l,f&&(typeof f=="object"&&u(f,c),l.state=function(){return u(c,{})}),l}r&&r.exports?r.exports=a:this.tychei=a})(Hf,e)}(Ar)),Ar.exports}var Fr={exports:{}},Yf={},Kf=Object.freeze({__proto__:null,default:Yf}),Qf=Bf(Kf),jf=Fr.exports,qi;function ec(){return qi||(qi=1,function(e){(function(t,r,n){var i=256,u=6,a=52,s="random",o=n.pow(i,u),c=n.pow(2,a),f=c*2,l=i-1,d;function D(y,v,g){var C=[];v=v==!0?{entropy:!0}:v||{};var E=F(m(v.entropy?[y,w(r)]:y??_(),3),C),B=new p(C),b=function(){for(var M=B.g(u),I=o,U=0;M<c;)M=(M+U)*i,I*=i,U=B.g(1);for(;M>=f;)M/=2,I/=2,U>>>=1;return(M+U)/I};return b.int32=function(){return B.g(4)|0},b.quick=function(){return B.g(4)/4294967296},b.double=b,F(w(B.S),r),(v.pass||g||function(M,I,U,O){return O&&(O.S&&h(O,B),M.state=function(){return h(B,{})}),U?(n[s]=M,I):M})(b,E,"global"in v?v.global:this==n,v.state)}function p(y){var v,g=y.length,C=this,E=0,B=C.i=C.j=0,b=C.S=[];for(g||(y=[g++]);E<i;)b[E]=E++;for(E=0;E<i;E++)b[E]=b[B=l&B+y[E%g]+(v=b[E])],b[B]=v;(C.g=function(M){for(var I,U=0,O=C.i,q=C.j,N=C.S;M--;)I=N[O=l&O+1],U=U*i+N[l&(N[O]=N[q=l&q+I])+(N[q]=I)];return C.i=O,C.j=q,U})(i)}function h(y,v){return v.i=y.i,v.j=y.j,v.S=y.S.slice(),v}function m(y,v){var g=[],C=typeof y,E;if(v&&C=="object")for(E in y)try{g.push(m(y[E],v-1))}catch{}return g.length?g:C=="string"?y:y+"\0"}function F(y,v){for(var g=y+"",C,E=0;E<g.length;)v[l&E]=l&(C^=v[l&E]*19)+g.charCodeAt(E++);return w(v)}function _(){try{var y;return d&&(y=d.randomBytes)?y=y(i):(y=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(y)),w(y)}catch{var v=t.navigator,g=v&&v.plugins;return[+new Date,t,g,t.screen,w(r)]}}function w(y){return String.fromCharCode.apply(0,y)}if(F(n.random(),r),e.exports){e.exports=D;try{d=Qf}catch{}}else n["seed"+s]=D})(typeof self<"u"?self:jf,[],Math)}(Fr)),Fr.exports}var rn,Ui;function tc(){if(Ui)return rn;Ui=1;var e=qf(),t=Lf(),r=Zf(),n=Vf(),i=kf(),u=Wf(),a=ec();return a.alea=e,a.xor128=t,a.xorwow=r,a.xorshift7=n,a.xor4096=i,a.tychei=u,rn=a,rn}var rc=tc(),Li=_f(rc),nc=Li(Date.now());function Gi(e){var t;function r(i){t=i===null?nc:Li(String(i))}r(e);function n(){return t()}return n}function Zi(e,t){var r=[];if(e=e.slice(0),e.length>1)for(var n=0,i=e.shift();n<i;n++)r.push(Zi(e,t));else for(var u=0,a=e.shift();u<a;u++)r.push(t());return r}var Ji="random",ic=["typed","config","?on"],uc=Q(Ji,ic,e=>{var{typed:t,config:r,on:n}=e,i=Gi(r.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=Gi(s.randomSeed))}),t(Ji,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,o)=>a(s,o),"Array | Matrix":s=>u(s,0,1),"Array | Matrix, number":(s,o)=>u(s,0,o),"Array | Matrix, number, number":(s,o,c)=>u(s,o,c)});function u(s,o,c){var f=Zi(s.valueOf(),()=>a(o,c));return we(s)?s.create(f,"number"):f}function a(s,o){return s+i()*(o-s)}}),Er=ro({config:wt}),ac=oo({}),Vi=po({}),nn=mo({}),Jt=Oo({Matrix:nn}),ie=ua({BigNumber:Er,Complex:ac,DenseMatrix:Jt,Fraction:Vi}),oc=ss({typed:ie}),Cr=cs({typed:ie}),sc=tf({typed:ie}),Ct=Go({config:wt,typed:ie}),Xi=af({typed:ie}),fc=Io({typed:ie}),cc=Po({equalScalar:Ct,typed:ie}),st=cf({typed:ie}),un=Js({typed:ie}),lc=Yo({typed:ie}),ki=uc({config:wt,typed:ie}),an=Vo({Matrix:nn,equalScalar:Ct,typed:ie}),Hi=hs({typed:ie}),hc=jo({BigNumber:Er,typed:ie}),Be=is({DenseMatrix:Jt,Matrix:nn,SparseMatrix:an,typed:ie}),It=gf({matrix:Be,typed:ie}),Wi=wf({BigNumber:Er,config:wt,matrix:Be,typed:ie}),on=nf({isInteger:fc,matrix:Be,typed:ie}),Yi=js({concat:on,equalScalar:Ct,matrix:Be,multiplyScalar:un,typed:ie}),dc=rs({Fraction:Vi,typed:ie}),Dc=sf({BigNumber:Er,DenseMatrix:Jt,SparseMatrix:an,config:wt,matrix:Be,typed:ie}),pc=Ff({bignumber:hc,fraction:dc,number:lc}),vc=pf({matrix:Be,config:wt,typed:ie}),sn=as({typed:ie}),Vt=bf({DenseMatrix:Jt,SparseMatrix:an,addScalar:Cr,concat:on,equalScalar:Ct,matrix:Be,typed:ie}),fn=Cf({numeric:pc,typed:ie}),gc=Hs({DenseMatrix:Jt,concat:on,equalScalar:Ct,matrix:Be,subtractScalar:Hi,typed:ie,unaryMinus:sn}),mc=Mf({addScalar:Cr,conj:sc,multiplyScalar:un,size:vc,typed:ie}),_t=Xs({addScalar:Cr,dot:mc,equalScalar:Ct,matrix:Be,multiplyScalar:un,typed:ie}),wc=Tf({divideScalar:fn,isZero:cc,matrix:Be,multiply:_t,subtractScalar:Hi,typed:ie,unaryMinus:sn}),yc=zf({abs:oc,addScalar:Cr,det:wc,divideScalar:fn,identity:Dc,matrix:Be,multiply:_t,typed:ie,unaryMinus:sn}),Ki=$f({divideScalar:fn,equalScalar:Ct,inv:yc,matrix:Be,multiply:_t,typed:ie});class ut{constructor(t){H(this,"type");this.type=t}activate(t){return t}derivative(t){return t}toJSON(){return{type:this.type}}static fromJSON(t){return ut.get(t.type)}copy(){return ut.get(this.type)}static get(t){switch(t){case"identity":return new Ac;case"sigmoid":return new Fc;case"relu":return new Ec;case"leakyrelu":return new Cc;case"truncatelinear":return new _c;default:throw new Error(`Activation function ${t} not found.`)}}}class Ac extends ut{constructor(){super("identity")}activate(t){return t}derivative(t){return st(t,r=>1)}}class Fc extends ut{constructor(){super("sigmoid")}activate(t){return st(t,r=>1/(1+Math.exp(-r)))}derivative(t){return st(t,r=>r*(1-r))}}class Ec extends ut{constructor(){super("relu")}activate(t){return st(t,r=>Math.max(0,r))}derivative(t){return st(t,r=>r>0?1:0)}}class Cc extends ut{constructor(r=.01){super("leakyrelu");H(this,"alpha");this.alpha=r}activate(r){return st(r,n=>Math.max(this.alpha*n,n))}derivative(r){return st(r,n=>n>0?1:this.alpha)}}class _c extends ut{constructor(r=0,n=1){super("truncatelinear");H(this,"min");H(this,"max");this.min=r,this.max=n}activate(r){return st(r,n=>Math.max(this.min,Math.min(n,this.max)))}derivative(r){return st(r,n=>this.min<=n&&n<=this.max?1:0)}}class Bt{constructor(t,r,n=.1,i="sigmoid"){H(this,"inputNodes");H(this,"outputNodes");H(this,"learningRate");H(this,"weights");H(this,"bias");H(this,"activation");this.inputNodes=t,this.outputNodes=r,this.learningRate=n,this.weights=Be(ki([r,t])),this.bias=Be(ki([r,1])),this.activation=ut.get(i)}forward(t){const r=Vt(_t(this.weights,t),this.bias);return this.activation.activate(r)}backward(t){return _t(It(this.weights),t)}train(t,r){const n=this.forward(t),i=Yi(this.activation.derivative(n),r),u=_t(i,this.learningRate),a=_t(u,It(t));this.weights=Vt(this.weights,a),this.bias=Vt(this.bias,Yi(u,1))}toJSON(){return{inputNodes:this.inputNodes,outputNodes:this.outputNodes,learningRate:this.learningRate,weights:this.weights.toArray(),bias:this.bias.toArray(),activation:this.activation.toJSON()}}static fromJSON(t){const r=new Bt(t.inputNodes,t.outputNodes,t.learningRate);return r.weights=Be(t.weights),r.bias=Be(t.bias),r.activation=ut.fromJSON(t.activation),r}copy(){const t=new Bt(this.inputNodes,this.outputNodes,this.learningRate);return t.weights=this.weights.clone(),t.bias=this.bias.clone(),t.activation=this.activation.copy(),t}static averageLayers(t){const r=t[0].inputNodes,n=t[t.length-1].outputNodes,i=t[0].learningRate;let u=Wi([n,r]),a=Wi([n,1]);t.forEach(o=>{u=Vt(u,o.weights),a=Vt(a,o.bias)});const s=new Bt(r,n,i);return s.weights=Ki(u,t.length),s.bias=Ki(a,t.length),s}}class Xt{constructor(t=[],r=.1){H(this,"layers",[]);for(let n=0;n<t.length-1;n++){const i=new Bt(t[n],t[n+1],r,"truncatelinear");this.layers.push(i)}}forward(t){const r=It(Be([t])),n=this._forward(r);return Xi(n).toArray()}_forward(t){let r=t;for(let n=0;n<this.layers.length;n++)r=this.layers[n].forward(r);return r}backward(t){let r=It(Be([t]));const n=this._backward(r);return Xi(n).toArray()}_backward(t){let r=t;for(let n=this.layers.length-1;n>=0;n--)r=this.layers[n].backward(r);return r}train(t,r){const n=It(Be([t])),i=It(Be([r]));this._train(0,n,i)}_train(t,r,n){if(t>=this.layers.length)return gc(n,r);const i=this.layers[t],u=i.forward(r),a=this._train(t+1,u,n);return i.train(r,a),i.backward(a)}setLearningRate(t){this.layers.forEach(r=>{r.learningRate=t})}getInputLength(){return this.layers[0].inputNodes}toJSON(){return{layers:this.layers.map(t=>t.toJSON())}}static fromJSON(t){const r=new Xt;return r.layers=t.layers.map(n=>Bt.fromJSON(n)),r}copy(){const t=new Xt;return t.layers=this.layers.map(r=>r.copy()),t}setBy(t){this.layers=t.layers.map(r=>r.copy())}static averageNetworks(t){const r=new Xt;for(let n=0;n<t[0].layers.length;n++){const i=Bt.averageLayers(t.map(u=>u.layers[n]));r.layers.push(i)}return r}}var Qi=(e=>(e[e.TOO_SMALL=-1]="TOO_SMALL",e[e.CORRECT=0]="CORRECT",e[e.TOO_BIG=1]="TOO_BIG",e))(Qi||{});class cn{constructor(){H(this,"random",Math.random);H(this,"target",-1);H(this,"guessNum",-1);H(this,"reversal",!1);H(this,"min",1);H(this,"max",100);H(this,"maxGuessCount",500);H(this,"history",[]);H(this,"onUpdate",()=>{})}initGame(){this.target=this._generateRandomNumber(this.min,this.max),this.history.length=0}_generateRandomNumber(t,r){return Math.floor(this.random()*(r-t+1))+t}next(){this.guess(this.guessNum),this.onUpdate()}guess(t){const r=this._guess(t);return this.history.push({guess:t,result:r}),r}_guess(t){return t===this.target?0:t>this.target?1:-1}isGameOver(){return this.history.length>=this.maxGuessCount?(console.log("max guess count reached"),!0):this.history.length>0&&this.history[this.history.length-1].result===0}getRounds(){return this.history.length}getLastResult(){return this.history.length<=0?null:this.history[this.history.length-1].result}getOptions(){return{min:this.min,max:this.max,target:this.target,maxGuessCount:this.maxGuessCount}}setOptions(t){const{min:r,max:n,target:i,maxGuessCount:u}=t;r&&(this.min=r),n&&(this.max=n),i&&(this.target=i),u&&(this.maxGuessCount=u)}toJSON(){return{target:this.target,guessNum:this.guessNum,reversal:this.reversal,min:this.min,max:this.max,maxGuessCount:this.maxGuessCount,history:this.history}}static fromJSON(t){const r=new cn;return r.target=t.target,r.guessNum=t.guessNum,r.reversal=t.reversal,r.min=t.min,r.max=t.max,r.maxGuessCount=t.maxGuessCount,r.history=t.history,r}}function ji(e,t,r){const n=Math.abs(r-t);return n===0?0:(e-t)/n}class Bc{constructor(t=Math.random()){H(this,"seed");this.seed=t}next(){return this.seed=(this.seed*9301+49297)%233280,this.seed/233280}random(){return(this.seed*9301+49297)%233280/233280}}class kt{constructor(t,r,n,i){H(this,"min");H(this,"max");H(this,"target");H(this,"history");if(t>r)throw new Error("min should not be greater than max");this.min=t,this.max=r,this.target=n,this.history=i}getEncodedState(){const t=n=>ji(n,this.min,this.max);return this.history.map(n=>[t(n.guess),n.result]).flat()}getAction(){return this.history.length===0?0:this.history[this.history.length-1].guess}getIndex(){return this.history.length}static fromGame(t){const r=t.min,n=t.max,i=t.target,u=t.history;return new kt(r,n,i,u)}static parseStatesFromGame(t){const r=[],n=t.history;for(let i=0;i<=n.length;i++){const u=n.slice(0,i),a=new kt(t.min,t.max,t.target,u);r.push(a)}return r}}class ln{constructor(t,r,n,i){H(this,"state");H(this,"action");H(this,"reward");H(this,"done");H(this,"originGuess");this.state=t,this.action=r,this.reward=n,this.done=i}static fromGameState(t,r,n){const i=t.getEncodedState();let u=0,a=0;r&&(u=r.getAction(),a=ji(u,t.min,t.max));const s=n,o=!r,c=new ln(i,a,s,o);return c.originGuess=u,c}}class Ht{constructor(t){H(this,"states",[]);this.states=t}static fromGame(t){const r=kt.parseStatesFromGame(t);return new Ht(r).generateTrainDatas()}generateTrainDatas(){const t=[],r=this._calTotalRewardOfStates();for(let n=this.states.length-1;n>=0;n--){const i=this.states[n],u=n+1<this.states.length?this.states[n+1]:null,a=n+1<this.states.length?r[n+1]:0,s=ln.fromGameState(i,u,a);t.push(s)}return t.reverse()}_getTotalReward(t,r){if(t>=this.states.length)return 0;const n=this.states[t],i=this._getStateReward(n),u=this._getTotalReward(r,r+1);return this._calTotalReward(i,u)}_calTotalRewardOfStates(){const t=[];let r=this._getStateReward(this.states[this.states.length-1]),n=0;for(let i=this.states.length-1;i>=0;i--)n=this._calTotalReward(0,r),r=n,t.push(n);return t.reverse()}_calTotalReward(t,r){return t+.99*r}_getStateReward(t){if(t.getIndex()===0)return 0;const r=t.getAction(),n=t.target;return r===n?1:0}}class hn{constructor(t="",r=!0,n=!1){H(this,"name");H(this,"enabled");H(this,"detailMode");this.name=t,this.enabled=r,this.detailMode=n}log(...t){if(!this.enabled)return;let r="";if(this.name&&(r+=`[${this.name}]`),this.detailMode){const n=new Error().stack;if(n){const i=n.split(`
`)[2].trim();r&&(r+=" "),r+=`${i}
`}}r?console.log(r,...t):console.log(...t)}}const _r=new hn("guesser-neural-network",!1);class Br{constructor(t,r=.5){H(this,"network");H(this,"explorationRate");this.network=t,this.explorationRate=r}isInputAffordable(t){const r=this.network.getInputLength();return!(t.getEncodedState().length>r)}_normalizeInputs(t){const r=this.network.getInputLength();return t.length<r&&(t=t.concat(Array(r-t.length).fill(0))),t.length>r&&(t=t.slice(0,r)),t}makeGuess(t){return Math.random()<=this.explorationRate?this.makeRandomGuess(t):this.makeNetworkGuess(t)}makeNetworkGuess(t){if(!this.isInputAffordable(t))throw console.error("can't afford gameState",t),new Error("can't afford gameState");const r=this._normalizeInputs(t.getEncodedState()),n=t.max,i=t.min,u=this.network.forward(r)[0];return this._makeGuess(u,i,n)}makeRandomGuess(t){const r=t.max,n=t.min,i=this._makeGuess(Math.random(),n,r);return _r.log("random guess",i),i}_makeGuess(t,r,n){const i=n-r+1;return Math.min(Math.floor(t*i+r),n)}trainByGame(t){const r=Ht.fromGame(t);this.train(r)}train(t){for(const r of t)this._train(r)}_train(t){if(t.done)return;const r=this._normalizeInputs(t.state),n=[t.action];let i=t.reward;i=Math.min(i,1),i=Math.max(i,.1*i),i=Math.max(i,-.01);const u=.1*i;_r.log("guess",t.originGuess),_r.log("reward",t.reward),_r.log("newLearningRate",u),this.network.setLearningRate(u),this.network.train(r,n)}static encodeGameState(t){return kt.fromGame(t)}static generateTrainDataFromGame(t){return Ht.fromGame(t)}}class xr{}class xc extends xr{}class eu extends xr{constructor(r){super();H(this,"guess");this.guess=r}}class tu extends xr{constructor(r){super();H(this,"reverse");this.reverse=r}}class dn extends xr{}class ru{constructor(){H(this,"gameInstance");H(this,"OnGameStarting",()=>{});H(this,"onUpdate",()=>{console.warn("Agent.onUpdate is not implemented")});H(this,"action",new xc);H(this,"_next",()=>{})}next(t){this.action=t,this._next()}update(){return new Promise(t=>{this._next=t,this.onUpdate()})}}function nu(e){return new Promise(t=>setTimeout(t,e))}const Rt=new hn("GameEnv",!0);class iu{constructor(t,r,n){H(this,"game");H(this,"attacker");H(this,"defender");H(this,"lastAgent",null);H(this,"updateInterval",0);H(this,"startDelay",0);this.game=t,this.attacker=r,this.defender=n}async start(){this.lastAgent=null,this._initAgents(),this.game.initGame(),Rt.log(`Target number is ${this.game.target}`),await this.loop()}_initAgents(){this.attacker.gameInstance=this.game,this.defender.gameInstance=this.game,this.attacker.OnGameStarting(),this.defender.OnGameStarting()}async loop(){var t;for(await nu(this.startDelay);;){if(this.game.isGameOver()){Rt.log("Game over");break}const r=this.getAgentToAct();await this._update(r);const n=(t=this.lastAgent)==null?void 0:t.action;if(n instanceof dn){Rt.log("Game ended by agent");break}n instanceof eu&&(this.game.guessNum=n.guess,Rt.log(`Attacker guessed ${n.guess}`)),n instanceof tu&&(this.game.reversal=n.reverse,Rt.log("Defender reversed the result or not:",n.reverse)),this.lastAgent===this.defender&&this.game.next(),this.updateInterval>0&&await nu(this.updateInterval)}}async _update(t){this.lastAgent=t,await t.update()}getAgentToAct(){return this.lastAgent?this.isAttackerTurn()?this.attacker:this.defender:this.attacker}isAttackerTurn(){return this.lastAgent===this.defender}isDefenderTurn(){return this.lastAgent===this.attacker}getWinner(){return this.game.isGameOver()?this.game.getLastResult()===Qi.CORRECT?this.attacker:this.defender:null}getRounds(){return this.game.getRounds()}enableLog(t){Rt.enabled=t}}const bc=new hn("ModelAgent",!1);class uu extends ru{constructor(r=null,n=.1){super();H(this,"network");this.setNetwork(r,n),this.onUpdate=()=>{this.guess()}}setNetwork(r,n){r?this.network=new Br(r,n):this.network=null}guess(){if(!this.network){console.warn("无猜数模型，无法猜数"),this.next(new dn);return}const r=Br.encodeGameState(this.gameInstance);if(!this.network.isInputAffordable(r)){bc.log("输入过长，无法进行预测"),this.next(new dn);return}const n=this.network.makeGuess(r);this.next(new eu(n))}}class au extends ru{constructor(){super(),this.onUpdate=()=>{this.next(new tu(!1))}}}class ou{constructor(t,r){H(this,"network");H(this,"game");H(this,"onUpdate",()=>{});this.network=t,this.game=r}async start(t,r){const n=new Br(this.network,r),i=this.game,u=new uu(this.network,r),a=new au,s=new iu(i,u,a);s.enableLog(!1);for(let o=0;o<t;o++)await s.start(),n.trainByGame(i),this.onUpdate(o+1)}}class su{constructor(t){H(this,"maxSize");H(this,"queue");this.maxSize=t,this.queue=[]}enqueue(t){this.queue.length>=this.maxSize&&this.queue.shift(),this.queue.push(t)}dequeue(){if(this.queue.length!==0)return this.queue.shift()}peek(){if(this.queue.length!==0)return this.queue[0]}getSize(){return this.queue.length}isFull(){return this.queue.length===this.maxSize}isEmpty(){return this.queue.length===0}print(){console.log(this.queue)}}class Sc extends ou{constructor(r,n){super(r,n);H(this,"progress",0);H(this,"trainTimes",0);H(this,"explorationRate",0);H(this,"batchNumber",4);H(this,"batchSize",25);H(this,"percentile",.25);H(this,"lastBatchRewardBuffer",new su(40))}async start(r,n,i=10,u=25,a=.25){for(this.explorationRate=n,this.trainTimes=r,this.progress=0,this.batchNumber=i,this.batchSize=u,this.percentile=a,this.lastBatchRewardBuffer=new su(3*i);this.progress<this.trainTimes;)await this._start(i,u,a)}async _start(r=4,n=25,i=.25){const u=await this.generateEpisodeBatches(r,n),a=this.filterEpisodeBatches(u,i);for(const s of a){if(this.progress>=this.trainTimes)break;this.trainByEpisodeBatch(s)}}trainByEpisodeBatch(r){const n=new Br(this.network);for(const i of r){if(this.progress>=this.trainTimes)break;n.train(i),this.onUpdate(++this.progress)}}async generateEpisodeBatches(r,n){const i=[],u=Math.random();for(let a=0;a<r;a++)i.push(await this.generateEpisodeBatch(n,u));return i}async generateEpisodeBatch(r,n=Math.random()){const i=[],u=this.game,a=new Bc(n);u.random=a.next.bind(a);const s=new uu(this.network,this.explorationRate),o=new au,c=new iu(u,s,o);c.enableLog(!1);for(let f=0;f<r;f++){await c.start();const l=Ht.fromGame(u);i.push(l)}return i}filterEpisodeBatches(r,n){if(n<0||n>1)throw new Error("Percentile must be between 0 and 1");const i=[],u=Math.max(Math.floor(r.length*n),1),a=r.map(o=>({reward:this.calEpisodeBatchReward(o),batch:o})),s=a.sort((o,c)=>c.reward-o.reward);console.log("sorted rewards",s.map(o=>o.reward.toFixed(3)));for(const{reward:o}of a)this.lastBatchRewardBuffer.enqueue(o);for(let o=0;i.length<u;o++){const{batch:c}=s[o];i.push(c)}return i.forEach(o=>{this.applyBaselineToBatch(o)}),console.log("baseline",this.calBaseline().toFixed(3)),i}calEpisodeBatchReward(r){let n=0;for(const i of r)n+=this.calEpisodeReward(i);return n}calEpisodeReward(r){return r[0].reward}getLastAverageBatchReward(){if(this.lastBatchRewardBuffer.isEmpty())return 0;let r=0;for(const i of this.lastBatchRewardBuffer.queue)r+=i;return r/this.lastBatchRewardBuffer.queue.length}calBaseline(){return this.getLastAverageBatchReward()/this.batchSize}applyBaselineToBatch(r){const n=this.calBaseline();for(const i of r)this.applyBaseline(i,n)}applyBaseline(r,n){for(const i of r)i.reward-=n}}class Mc{static create(t,r,n){switch(n){case"":return new ou(t,r);case"cross-entropy":return new Sc(t,r);default:throw new Error(`Trainer ${n} not found`)}}}self.addEventListener("message",async e=>{const{networkJSON:t,gameJSON:r,trainTimes:n,trainerName:i,explorationRate:u}=e.data,a=Xt.fromJSON(t),s=cn.fromJSON(r);await Mc.create(a,s,i).start(n,u),postMessage({networkJSON:a.toJSON()})})})();
